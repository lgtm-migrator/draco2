
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Draco Helper Class &#8212; Draco</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Read Data and Generate the Schema" href="schema.html" />
    <link rel="prev" title="Overview" href="intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo-light.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Draco</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Facts
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../facts/intro.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../facts/schema.html">
   Data and Schema
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../facts/view.html">
   Views
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../facts/mark.html">
   Marks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../facts/encoding.html">
   Encodings
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../facts/scale.html">
   Scales
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../facts/task.html">
   Tasks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../facts/facet.html">
   Facets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../facts/examples.html">
   Example Charts
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  API
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Draco Helper Class
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="schema.html">
   Read Data and Generate the Schema
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="run.html">
   Run
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="facts.html">
   Fact Utils
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="programs.html">
   Programs
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Guide
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../guide.html">
   How to customize or extend the knowledge base
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../bibliography.html">
   Bibliography
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/cmudig/draco2/main?urlpath=lab/tree/docs/api/draco.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/cmudig/draco2"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/cmudig/draco2/issues/new?title=Issue%20on%20page%20%2Fapi/draco.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/cmudig/draco2/edit/main/docs/api/draco.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/api/draco.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#class-documentation">
   Class Documentation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage-example">
   Usage Example
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Draco Helper Class</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#class-documentation">
   Class Documentation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage-example">
   Usage Example
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="draco-helper-class">
<h1>Draco Helper Class<a class="headerlink" href="#draco-helper-class" title="Permalink to this headline">#</a></h1>
<p>Draco can check whether a visualization specification is valid. If it isn’t valid, it can also compute what constrains are being violated. These methods check a specification against the standard set of constraints in Draco. If you define your own constraints, you can pass different ASP programs to the constructor or instead use the lower-level <a class="reference internal" href="run.html"><span class="doc std std-doc">Draco run API</span></a>.</p>
<section id="class-documentation">
<h2>Class Documentation<a class="headerlink" href="#class-documentation" title="Permalink to this headline">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="draco.Draco">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">draco.</span></span><span class="sig-name descname"><span class="pre">Draco</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">define</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Program(program=&quot;%</span> <span class="pre">======</span> <span class="pre">Definitions</span> <span class="pre">of</span> <span class="pre">valid</span> <span class="pre">function</span> <span class="pre">domains</span> <span class="pre">======\\n\\n%</span> <span class="pre">&#64;definition(mark_type)</span> <span class="pre">Types</span> <span class="pre">of</span> <span class="pre">marks</span> <span class="pre">to</span> <span class="pre">encode</span> <span class="pre">data.\\ndomain((mark,type),(point;bar;line;area;text;tick;rect)).\\n\\n%</span> <span class="pre">&#64;definition(field_type)</span> <span class="pre">Basic</span> <span class="pre">types</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">data.\\ndomain((field,type),(string;number;boolean;datetime)).\\n\\n%</span> <span class="pre">&#64;definition(field_names)</span> <span class="pre">Names</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">data.\\ndomain((field,name),F)</span> <span class="pre">:-</span> <span class="pre">attribute((field,name),_,F).\\n\\n%</span> <span class="pre">&#64;definition(field_ids)\\ndomain((encoding,field),F)</span> <span class="pre">:-</span> <span class="pre">entity(field,_,F).\\n\\n%</span> <span class="pre">&#64;definition(aggregate)</span> <span class="pre">Aggregation</span> <span class="pre">functions.\\ndomain((encoding,aggregate),(count;mean;median;min;max;stdev;sum)).\\ndomain((encoding,aggregate),(count;sum)).\\n\\n%</span> <span class="pre">&#64;definition(binning)</span> <span class="pre">Numbers</span> <span class="pre">of</span> <span class="pre">bins</span> <span class="pre">that</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">recommended,</span> <span class="pre">any</span> <span class="pre">natural</span> <span class="pre">number</span> <span class="pre">is</span> <span class="pre">allowed.\\ndomain(binCount,(10;25;200)).\\ndomain((encoding,binning),N)</span> <span class="pre">:-</span> <span class="pre">domain(binCount,N).\\n\\n%</span> <span class="pre">&#64;definition(channel)</span> <span class="pre">Encoding</span> <span class="pre">channels.\\ndomain(positional,(x;y)).\\ndomain(non_positional,(color;size;shape;text;detail)).\\ndomain(single_channel,C)</span> <span class="pre">:-</span> <span class="pre">domain(positional,C).\\ndomain(single_channel,C)</span> <span class="pre">:-</span> <span class="pre">domain(non_positional,C).\\ndomain(multi_channel,detail).\\ndomain(channel,C)</span> <span class="pre">:-</span> <span class="pre">domain(single_channel,C).\\ndomain(channel,C)</span> <span class="pre">:-</span> <span class="pre">domain(multi_channel,C).\\n\\ndomain((encoding,channel),C)</span> <span class="pre">:-</span> <span class="pre">domain(channel,C).\\ndomain((scale,channel),C)</span> <span class="pre">:-</span> <span class="pre">domain(channel,C).\\n\\n%</span> <span class="pre">&#64;definition(encoding_channel)</span> <span class="pre">All</span> <span class="pre">channels</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">mark's</span> <span class="pre">encodings.\\ndomain(encoding_channel,V,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C).\\n\\n%</span> <span class="pre">&#64;definition(scale_encoding)</span> <span class="pre">All</span> <span class="pre">channels</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">view's</span> <span class="pre">and</span> <span class="pre">root's</span> <span class="pre">scales.\\ndomain(scale_channel,V,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C).\\ndomain(scale_channel,V,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(view,R,V),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,R,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C).\\n\\n%</span> <span class="pre">&#64;definition(scale_type)</span> <span class="pre">Scale</span> <span class="pre">types.\\ndomain(discrete_scale,(ordinal;categorical)).\\ndomain(continuous_scale,(log;linear)).\\ndomain(scale_type,T)</span> <span class="pre">:-</span> <span class="pre">domain(discrete_scale,T).\\ndomain(scale_type,T)</span> <span class="pre">:-</span> <span class="pre">domain(continuous_scale,T).\\n\\ndomain((scale,type),T)</span> <span class="pre">:-</span> <span class="pre">domain(scale_type,T).\\n\\n%</span> <span class="pre">&#64;definition(task)</span> <span class="pre">Tasks.\\ndomain(task,(value;summary)).\\n\\n%</span> <span class="pre">&#64;definition(stack)</span> <span class="pre">Stacking</span> <span class="pre">methods.\\ndomain((encoding,stack),(zero;center;normalize)).\\n\\n%</span> <span class="pre">&#64;definition(scale_zero)</span> <span class="pre">Scale</span> <span class="pre">start</span> <span class="pre">with</span> <span class="pre">0.\\ndomain((scale,zero),true).\\n\\n%</span> <span class="pre">&#64;definition(facets)</span> <span class="pre">Definition</span> <span class="pre">for</span> <span class="pre">facets\\ndomain((facet,field),F)</span> <span class="pre">:-</span> <span class="pre">entity(field,_,F).\\ndomain((facet,channel),(row;col)).\\ndomain((facet,binning),N)</span> <span class="pre">:-</span> <span class="pre">domain(binCount,N).\\n&quot;,</span> <span class="pre">blocks={'__preamble__':</span> <span class="pre">'%</span> <span class="pre">======</span> <span class="pre">Definitions</span> <span class="pre">of</span> <span class="pre">valid</span> <span class="pre">function</span> <span class="pre">domains</span> <span class="pre">======\\n',</span> <span class="pre">'mark_type':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Types</span> <span class="pre">of</span> <span class="pre">marks</span> <span class="pre">to</span> <span class="pre">encode</span> <span class="pre">data.',</span> <span class="pre">program='domain((mark,type),(point;bar;line;area;text;tick;rect)).\\n'),</span> <span class="pre">'field_type':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Basic</span> <span class="pre">types</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">data.',</span> <span class="pre">program='domain((field,type),(string;number;boolean;datetime)).\\n'),</span> <span class="pre">'field_names':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Names</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">data.',</span> <span class="pre">program='domain((field,name),F)</span> <span class="pre">:-</span> <span class="pre">attribute((field,name),_,F).\\n'),</span> <span class="pre">'aggregate':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Aggregation</span> <span class="pre">functions.',</span> <span class="pre">program='domain((encoding,aggregate),(count;mean;median;min;max;stdev;sum)).\\ndomain((encoding,aggregate),(count;sum)).\\n'),</span> <span class="pre">'binning':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Numbers</span> <span class="pre">of</span> <span class="pre">bins</span> <span class="pre">that</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">recommended,</span> <span class="pre">any</span> <span class="pre">natural</span> <span class="pre">number</span> <span class="pre">is</span> <span class="pre">allowed.',</span> <span class="pre">program='domain(binCount,(10;25;200)).\\ndomain((encoding,binning),N)</span> <span class="pre">:-</span> <span class="pre">domain(binCount,N).\\n'),</span> <span class="pre">'channel':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Encoding</span> <span class="pre">channels.',</span> <span class="pre">program='domain(positional,(x;y)).\\ndomain(non_positional,(color;size;shape;text;detail)).\\ndomain(single_channel,C)</span> <span class="pre">:-</span> <span class="pre">domain(positional,C).\\ndomain(single_channel,C)</span> <span class="pre">:-</span> <span class="pre">domain(non_positional,C).\\ndomain(multi_channel,detail).\\ndomain(channel,C)</span> <span class="pre">:-</span> <span class="pre">domain(single_channel,C).\\ndomain(channel,C)</span> <span class="pre">:-</span> <span class="pre">domain(multi_channel,C).\\ndomain((encoding,channel),C)</span> <span class="pre">:-</span> <span class="pre">domain(channel,C).\\ndomain((scale,channel),C)</span> <span class="pre">:-</span> <span class="pre">domain(channel,C).\\n'),</span> <span class="pre">'encoding_channel':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description=&quot;All</span> <span class="pre">channels</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">mark's</span> <span class="pre">encodings.&quot;,</span> <span class="pre">program='domain(encoding_channel,V,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C).\\n'),</span> <span class="pre">'scale_encoding':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description=&quot;All</span> <span class="pre">channels</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">view's</span> <span class="pre">and</span> <span class="pre">root's</span> <span class="pre">scales.&quot;,</span> <span class="pre">program='domain(scale_channel,V,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C).\\ndomain(scale_channel,V,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(view,R,V),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,R,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C).\\n'),</span> <span class="pre">'scale_type':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Scale</span> <span class="pre">types.',</span> <span class="pre">program='domain(discrete_scale,(ordinal;categorical)).\\ndomain(continuous_scale,(log;linear)).\\ndomain(scale_type,T)</span> <span class="pre">:-</span> <span class="pre">domain(discrete_scale,T).\\ndomain(scale_type,T)</span> <span class="pre">:-</span> <span class="pre">domain(continuous_scale,T).\\ndomain((scale,type),T)</span> <span class="pre">:-</span> <span class="pre">domain(scale_type,T).\\n'),</span> <span class="pre">'task':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Tasks.',</span> <span class="pre">program='domain(task,(value;summary)).\\n'),</span> <span class="pre">'stack':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Stacking</span> <span class="pre">methods.',</span> <span class="pre">program='domain((encoding,stack),(zero;center;normalize)).\\n'),</span> <span class="pre">'scale_zero':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Scale</span> <span class="pre">start</span> <span class="pre">with</span> <span class="pre">0.',</span> <span class="pre">program='domain((scale,zero),true).\\n'),</span> <span class="pre">'facets':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Definition</span> <span class="pre">for</span> <span class="pre">facets',</span> <span class="pre">program='domain((facet,field),F)</span> <span class="pre">:-</span> <span class="pre">entity(field,_,F).\\ndomain((facet,channel),(row;col)).\\ndomain((facet,binning),N)</span> <span class="pre">:-</span> <span class="pre">domain(binCount,N).\\n')})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Program(program='%</span> <span class="pre">======</span> <span class="pre">Constraints</span> <span class="pre">======\\n\\n%</span> <span class="pre">&#64;definition(invalid_domain)</span> <span class="pre">Only</span> <span class="pre">valid</span> <span class="pre">domain</span> <span class="pre">values</span> <span class="pre">are</span> <span class="pre">allowed.\\nviolation(invalid_domain)</span> <span class="pre">:-</span> <span class="pre">attribute(P,_,V),</span> <span class="pre">domain(P,_),</span> <span class="pre">not</span> <span class="pre">domain(P,V).\\n\\n%</span> <span class="pre">&#64;definition(duplicate_attribute)</span> <span class="pre">Do</span> <span class="pre">not</span> <span class="pre">define</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">attribute</span> <span class="pre">twice.\\nviolation(duplicate_attribute)</span> <span class="pre">:-</span> <span class="pre">attribute(P,O,V1),</span> <span class="pre">attribute(P,O,V2),</span> <span class="pre">domain(P,_),</span> <span class="pre">V1!=V2.\\n\\n%</span> <span class="pre">&#64;definition(valid_fields)</span> <span class="pre">Only</span> <span class="pre">allow</span> <span class="pre">fields</span> <span class="pre">that</span> <span class="pre">have</span> <span class="pre">been</span> <span class="pre">defined.\\nviolation(existing_field)</span> <span class="pre">:-</span> <span class="pre">attribute((encoding,field),_,F),</span> <span class="pre">not</span> <span class="pre">entity(field,_,F).\\n\\n%</span> <span class="pre">&#64;definition(attribute_entity)</span> <span class="pre">The</span> <span class="pre">type</span> <span class="pre">of</span> <span class="pre">an</span> <span class="pre">attribute</span> <span class="pre">path</span> <span class="pre">should</span> <span class="pre">link</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">correct</span> <span class="pre">entity.\\nviolation(attribute_entity)</span> <span class="pre">:-</span> <span class="pre">attribute((P,_),E,_),</span> <span class="pre">entity(_,_,E),</span> <span class="pre">not</span> <span class="pre">entity(P,_,E).\\n\\n%</span> <span class="pre">&#64;definition(violation)</span> <span class="pre">No</span> <span class="pre">violations</span> <span class="pre">allowed.\\n:-</span> <span class="pre">violation(_).\\n',</span> <span class="pre">blocks={'__preamble__':</span> <span class="pre">'%</span> <span class="pre">======</span> <span class="pre">Constraints</span> <span class="pre">======\\n',</span> <span class="pre">'invalid_domain':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Only</span> <span class="pre">valid</span> <span class="pre">domain</span> <span class="pre">values</span> <span class="pre">are</span> <span class="pre">allowed.',</span> <span class="pre">program='violation(invalid_domain)</span> <span class="pre">:-</span> <span class="pre">attribute(P,_,V),</span> <span class="pre">domain(P,_),</span> <span class="pre">not</span> <span class="pre">domain(P,V).\\n'),</span> <span class="pre">'duplicate_attribute':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Do</span> <span class="pre">not</span> <span class="pre">define</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">attribute</span> <span class="pre">twice.',</span> <span class="pre">program='violation(duplicate_attribute)</span> <span class="pre">:-</span> <span class="pre">attribute(P,O,V1),</span> <span class="pre">attribute(P,O,V2),</span> <span class="pre">domain(P,_),</span> <span class="pre">V1!=V2.\\n'),</span> <span class="pre">'valid_fields':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='Only</span> <span class="pre">allow</span> <span class="pre">fields</span> <span class="pre">that</span> <span class="pre">have</span> <span class="pre">been</span> <span class="pre">defined.',</span> <span class="pre">program='violation(existing_field)</span> <span class="pre">:-</span> <span class="pre">attribute((encoding,field),_,F),</span> <span class="pre">not</span> <span class="pre">entity(field,_,F).\\n'),</span> <span class="pre">'attribute_entity':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='The</span> <span class="pre">type</span> <span class="pre">of</span> <span class="pre">an</span> <span class="pre">attribute</span> <span class="pre">path</span> <span class="pre">should</span> <span class="pre">link</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">correct</span> <span class="pre">entity.',</span> <span class="pre">program='violation(attribute_entity)</span> <span class="pre">:-</span> <span class="pre">attribute((P,_),E,_),</span> <span class="pre">entity(_,_,E),</span> <span class="pre">not</span> <span class="pre">entity(P,_,E).\\n'),</span> <span class="pre">'violation':</span> <span class="pre">Block(block_type='definition',</span> <span class="pre">description='No</span> <span class="pre">violations</span> <span class="pre">allowed.',</span> <span class="pre">program=':-</span> <span class="pre">violation(_).\\n')})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">helpers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Program(program='%</span> <span class="pre">======</span> <span class="pre">Helpers</span> <span class="pre">======\\n\\n%</span> <span class="pre">&#64;helper(mark_channel)</span> <span class="pre">Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">an</span> <span class="pre">encoding</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">channel.\\nattribute((mark,channel),M,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C).\\n\\n%</span> <span class="pre">&#64;helper(mark_with_stack)</span> <span class="pre">Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">an</span> <span class="pre">encoding</span> <span class="pre">with</span> <span class="pre">stacking.\\nattribute(mark_with_stack,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,_).\\n\\n%</span> <span class="pre">&#64;helper(mark_scale)</span> <span class="pre">Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">scale.\\nattribute((mark,scale),M,S)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S).\\nattribute((mark,scale),M,S)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(view,R,V),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,R,S).\\n\\n%</span> <span class="pre">&#64;helper(mark_scale_channel)</span> <span class="pre">Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">scale</span> <span class="pre">type</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">channel.\\nattribute(mark_scale_channel,M,T,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,scale),M,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,type),S,T).\\n\\n%</span> <span class="pre">&#64;helper(mark_encoding_scale)</span> <span class="pre">Link</span> <span class="pre">mark,</span> <span class="pre">encoding,</span> <span class="pre">and</span> <span class="pre">scale</span> <span class="pre">togther.\\nattribute(mark_encoding_scale,M,E,S)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,scale),M,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C).\\n\\n%</span> <span class="pre">&#64;helper(encoding_type)</span> <span class="pre">Whether</span> <span class="pre">an</span> <span class="pre">encoding</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">channel</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">scale</span> <span class="pre">type.\\nattribute((encoding,scale_type),E,T)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,C).\\n\\n%</span> <span class="pre">&#64;helper(mark_channel_field)</span> <span class="pre">Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">an</span> <span class="pre">encoding</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">field</span> <span class="pre">and</span> <span class="pre">a</span> <span class="pre">channel.\\nattribute(mark_channel_field,M,C,F)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F).\\n\\n%</span> <span class="pre">&#64;helper(mark_channel_scale)</span> <span class="pre">whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">scale</span> <span class="pre">type</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">channel(with</span> <span class="pre">or</span> <span class="pre">without</span> <span class="pre">binned</span> <span class="pre">encoding).\\nattribute(mark_channel_scale,M,T,C,B)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,B).\\nattribute(mark_channel_scale,M,T,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,binning),E,_).\\n\\n%</span> <span class="pre">&#64;helper(mark_channel_discrete_or_binned)</span> <span class="pre">Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">discrete</span> <span class="pre">scale</span> <span class="pre">or</span> <span class="pre">binned</span> <span class="pre">encoding</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">channel.\\nattribute(mark_channel_discrete_or_binned,M,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,C),\\n</span>&#160;&#160;&#160; <span class="pre">domain(discrete_scale,T).\\nattribute(mark_channel_discrete_or_binned,M,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_).\\n\\n%</span> <span class="pre">&#64;helper(mark_encoding_discrete_or_binned)</span> <span class="pre">Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">discrete</span> <span class="pre">scale</span> <span class="pre">or</span> <span class="pre">binned</span> <span class="pre">encoding</span> <span class="pre">for</span> <span class="pre">an</span> <span class="pre">encoding.\\nattribute(mark_encoding_discrete_or_binned,M,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,C),\\n</span>&#160;&#160;&#160; <span class="pre">domain(discrete_scale,T).\\nattribute(mark_encoding_discrete_or_binned,M,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_).\\n\\n%</span> <span class="pre">&#64;helper(mark_encoding_cont)</span> <span class="pre">Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">continuous</span> <span class="pre">for</span> <span class="pre">an</span> <span class="pre">encoding.\\nattribute(mark_encoding_cont,M,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E).\\n\\n%</span> <span class="pre">&#64;helper(encoding_cardinality,E,N)</span> <span class="pre">The</span> <span class="pre">cardinality</span> <span class="pre">of</span> <span class="pre">an</span> <span class="pre">encoding.\\nattribute(encoding_cardinality,E,N)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,unique),F,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,binning),E,_).\\nattribute(encoding_cardinality,E,N)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,N).\\n\\n%</span> <span class="pre">&#64;helper(facet_cardinality,Fa,N)</span> <span class="pre">The</span> <span class="pre">cardinality</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">facet.\\nattribute(facet_cardinality,Fa,N)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,unique),Fi,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,field),Fa,Fi),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((facet,binning),Fa,_).\\nattribute(facet_cardinality,Fa,N)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,binning),Fa,N).\\n\\n%</span> <span class="pre">&#64;helper(is_c_c)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">continuous.\\nattribute(is_c_c,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,y).\\n\\n%</span> <span class="pre">&#64;helper(is_c_d)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">discrete.\\nattribute(is_c_d,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,y).\\nattribute(is_c_d,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,y).\\n\\n%</span> <span class="pre">&#64;helper(is_d_d)</span> <span class="pre">Discrete</span> <span class="pre">by</span> <span class="pre">discrete.\\nattribute(is_d_d,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,y).\\n',</span> <span class="pre">blocks={'__preamble__':</span> <span class="pre">'%</span> <span class="pre">======</span> <span class="pre">Helpers</span> <span class="pre">======\\n',</span> <span class="pre">'mark_channel':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">an</span> <span class="pre">encoding</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">channel.',</span> <span class="pre">program='attribute((mark,channel),M,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C).\\n'),</span> <span class="pre">'mark_with_stack':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">an</span> <span class="pre">encoding</span> <span class="pre">with</span> <span class="pre">stacking.',</span> <span class="pre">program='attribute(mark_with_stack,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,_).\\n'),</span> <span class="pre">'mark_scale':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">scale.',</span> <span class="pre">program='attribute((mark,scale),M,S)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S).\\nattribute((mark,scale),M,S)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(view,R,V),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,R,S).\\n'),</span> <span class="pre">'mark_scale_channel':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">scale</span> <span class="pre">type</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">channel.',</span> <span class="pre">program='attribute(mark_scale_channel,M,T,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,scale),M,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,type),S,T).\\n'),</span> <span class="pre">'mark_encoding_scale':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Link</span> <span class="pre">mark,</span> <span class="pre">encoding,</span> <span class="pre">and</span> <span class="pre">scale</span> <span class="pre">togther.',</span> <span class="pre">program='attribute(mark_encoding_scale,M,E,S)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,scale),M,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C).\\n'),</span> <span class="pre">'encoding_type':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Whether</span> <span class="pre">an</span> <span class="pre">encoding</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">channel</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">scale</span> <span class="pre">type.',</span> <span class="pre">program='attribute((encoding,scale_type),E,T)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,C).\\n'),</span> <span class="pre">'mark_channel_field':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">an</span> <span class="pre">encoding</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">field</span> <span class="pre">and</span> <span class="pre">a</span> <span class="pre">channel.',</span> <span class="pre">program='attribute(mark_channel_field,M,C,F)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F).\\n'),</span> <span class="pre">'mark_channel_scale':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">scale</span> <span class="pre">type</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">channel(with</span> <span class="pre">or</span> <span class="pre">without</span> <span class="pre">binned</span> <span class="pre">encoding).',</span> <span class="pre">program='attribute(mark_channel_scale,M,T,C,B)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,B).\\nattribute(mark_channel_scale,M,T,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,binning),E,_).\\n'),</span> <span class="pre">'mark_channel_discrete_or_binned':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">discrete</span> <span class="pre">scale</span> <span class="pre">or</span> <span class="pre">binned</span> <span class="pre">encoding</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">channel.',</span> <span class="pre">program='attribute(mark_channel_discrete_or_binned,M,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,C),\\n</span>&#160;&#160;&#160; <span class="pre">domain(discrete_scale,T).\\nattribute(mark_channel_discrete_or_binned,M,C)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_).\\n'),</span> <span class="pre">'mark_encoding_discrete_or_binned':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">discrete</span> <span class="pre">scale</span> <span class="pre">or</span> <span class="pre">binned</span> <span class="pre">encoding</span> <span class="pre">for</span> <span class="pre">an</span> <span class="pre">encoding.',</span> <span class="pre">program='attribute(mark_encoding_discrete_or_binned,M,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,C),\\n</span>&#160;&#160;&#160; <span class="pre">domain(discrete_scale,T).\\nattribute(mark_encoding_discrete_or_binned,M,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_).\\n'),</span> <span class="pre">'mark_encoding_cont':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Whether</span> <span class="pre">a</span> <span class="pre">mark</span> <span class="pre">has</span> <span class="pre">a</span> <span class="pre">continuous</span> <span class="pre">for</span> <span class="pre">an</span> <span class="pre">encoding.',</span> <span class="pre">program='attribute(mark_encoding_cont,M,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E).\\n'),</span> <span class="pre">'is_c_c':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">continuous.',</span> <span class="pre">program='attribute(is_c_c,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,y).\\n'),</span> <span class="pre">'is_c_d':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">discrete.',</span> <span class="pre">program='attribute(is_c_d,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,y).\\nattribute(is_c_d,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,y).\\n'),</span> <span class="pre">'is_d_d':</span> <span class="pre">Block(block_type='helper',</span> <span class="pre">description='Discrete</span> <span class="pre">by</span> <span class="pre">discrete.',</span> <span class="pre">program='attribute(is_d_d,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,y).\\n')})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Program(program=&quot;%</span> <span class="pre">======</span> <span class="pre">Hard</span> <span class="pre">constraints</span> <span class="pre">======\\n\\n%</span> <span class="pre">&#64;hard(scale_type_data_type)</span> <span class="pre">Primitive</span> <span class="pre">type</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">support</span> <span class="pre">scale</span> <span class="pre">type.\\nviolation(scale_type_data_type)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,(string;boolean)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,T),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T).\\n\\n%</span> <span class="pre">&#64;hard(log_non_positive)</span> <span class="pre">Cannot</span> <span class="pre">use</span> <span class="pre">log</span> <span class="pre">if</span> <span class="pre">the</span> <span class="pre">data</span> <span class="pre">is</span> <span class="pre">negative</span> <span class="pre">or</span> <span class="pre">zero.\\nviolation(log_non_positive)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,min),F,MIN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log),\\n</span>&#160;&#160;&#160; <span class="pre">MIN</span> <span class="pre">&lt;=</span> <span class="pre">0.\\n\\n%</span> <span class="pre">&#64;hard(bin_and_aggregate)</span> <span class="pre">Cannot</span> <span class="pre">bin</span> <span class="pre">and</span> <span class="pre">aggregate.\\nviolation(bin_and_aggregate)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,_).\\n\\n%</span> <span class="pre">&#64;hard(aggregate_t_valid)</span> <span class="pre">Temporal</span> <span class="pre">scale</span> <span class="pre">only</span> <span class="pre">supports</span> <span class="pre">min</span> <span class="pre">and</span> <span class="pre">max.\\nviolation(aggregate_t_valid)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,datetime),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,A),\\n</span>&#160;&#160;&#160; <span class="pre">A</span> <span class="pre">!=</span> <span class="pre">min,\\n</span>&#160;&#160;&#160; <span class="pre">A</span> <span class="pre">!=</span> <span class="pre">max.\\n\\n%</span> <span class="pre">&#64;hard(aggregate_num_valid)</span> <span class="pre">Only</span> <span class="pre">numbers</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">aggregated</span> <span class="pre">with</span> <span class="pre">mean,</span> <span class="pre">sum,</span> <span class="pre">stdev\\nviolation(aggregate_num_valid)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,T),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,(mean;sum;stdev)),\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">number.\\n\\n%</span> <span class="pre">&#64;hard(bin_n_d)</span> <span class="pre">Only</span> <span class="pre">numbers</span> <span class="pre">and</span> <span class="pre">datetimes</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">binned\\nviolation(bin_n_d)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,T),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">number,\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">datetime.\\n\\n%</span> <span class="pre">&#64;hard(aggregate_detail)</span> <span class="pre">Detail</span> <span class="pre">cannot</span> <span class="pre">be</span> <span class="pre">aggregated.\\nviolation(aggregate_detail)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,detail),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,_).\\n\\n%</span> <span class="pre">&#64;hard(count_without_q)</span> <span class="pre">Count</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">continuous</span> <span class="pre">scale.\\nviolation(count_without_q)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,count),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,T),\\n</span>&#160;&#160;&#160; <span class="pre">domain(discrete_scale,T).\\n\\n%</span> <span class="pre">&#64;hard(shape_not_ordinal)</span> <span class="pre">Shape</span> <span class="pre">requires</span> <span class="pre">discrete</span> <span class="pre">and</span> <span class="pre">ordinal</span> <span class="pre">(ordinal/categorical</span> <span class="pre">doesn't</span> <span class="pre">matter</span> <span class="pre">as</span> <span class="pre">scale</span> <span class="pre">types,</span> <span class="pre">so</span> <span class="pre">we</span> <span class="pre">use</span> <span class="pre">oridnal</span> <span class="pre">only</span> <span class="pre">here).\\nviolation(shape_not_ordinal)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,_,T,shape),\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">ordinal.\\n\\n%</span> <span class="pre">&#64;hard(categorical_not_color)</span> <span class="pre">Categorical</span> <span class="pre">only</span> <span class="pre">works</span> <span class="pre">with</span> <span class="pre">color</span> <span class="pre">channel.\\nviolation(categorical_not_color)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,type),S,categorical),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,channel),S,color).\\n\\n%</span> <span class="pre">&#64;hard(size_negative)</span> <span class="pre">Do</span> <span class="pre">not</span> <span class="pre">use</span> <span class="pre">size</span> <span class="pre">when</span> <span class="pre">data</span> <span class="pre">is</span> <span class="pre">negative</span> <span class="pre">as</span> <span class="pre">size</span> <span class="pre">implies</span> <span class="pre">that</span> <span class="pre">data</span> <span class="pre">is</span> <span class="pre">positive.\\nviolation(size_negative)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,min),F,MIN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,max),F,MAX),\\n</span>&#160;&#160;&#160; <span class="pre">MIN</span> <span class="pre">&lt;</span> <span class="pre">0,\\n</span>&#160;&#160;&#160; <span class="pre">MAX</span> <span class="pre">&gt;</span> <span class="pre">0.\\n\\n%</span> <span class="pre">&#64;hard(encoding_repeat_channel)</span> <span class="pre">Cannot</span> <span class="pre">use</span> <span class="pre">single</span> <span class="pre">channels</span> <span class="pre">twice</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">mark.\\nviolation(encoding_repeat_channel)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E1),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E2),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E1,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E2,C),\\n</span>&#160;&#160;&#160; <span class="pre">E1</span> <span class="pre">&gt;</span> <span class="pre">E2.\\n\\n%</span> <span class="pre">&#64;hard(scale_repeat_channel)</span> <span class="pre">Cannot</span> <span class="pre">use</span> <span class="pre">single</span> <span class="pre">channels</span> <span class="pre">twice</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">view.\\nviolation(scale_repeat_channel)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S1),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S2),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S1,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S2,C),\\n</span>&#160;&#160;&#160; <span class="pre">S1</span> <span class="pre">&gt;</span> <span class="pre">S2.\\n\\n%</span> <span class="pre">&#64;hard(encoding_channel_without_scale)</span> <span class="pre">Encoding</span> <span class="pre">channel</span> <span class="pre">doesn't</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">corresponding</span> <span class="pre">scale</span> <span class="pre">channel.\\nviolation(encoding_channel_without_scale)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">domain(scale_channel,V,C).\\n\\n%</span> <span class="pre">&#64;hard(scale_channel_without_encoding)</span> <span class="pre">Scale</span> <span class="pre">channel</span> <span class="pre">doesn't</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">corresponding</span> <span class="pre">encoding</span> <span class="pre">channel.\\nviolation(scale_channel_without_encoding)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(view,_,V),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">domain(encoding_channel,V,C).\\n\\n%</span> <span class="pre">&#64;hard(no_encodings)</span> <span class="pre">There</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">at</span> <span class="pre">least</span> <span class="pre">one</span> <span class="pre">encoding</span> <span class="pre">for</span> <span class="pre">every</span> <span class="pre">mark.\\nviolation(no_encodings)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">entity(encoding,M,_).\\n\\n%</span> <span class="pre">&#64;hard(encoding_no_field_and_not_count)</span> <span class="pre">All</span> <span class="pre">encodings</span> <span class="pre">(if</span> <span class="pre">they</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">channel)</span> <span class="pre">require</span> <span class="pre">field</span> <span class="pre">except</span> <span class="pre">if</span> <span class="pre">we</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">count</span> <span class="pre">aggregate.\\nviolation(encoding_no_field_and_not_count)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,_,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,field),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,count).\\n\\n%</span> <span class="pre">&#64;hard(count_with_field)</span> <span class="pre">Count</span> <span class="pre">should</span> <span class="pre">not</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">field.</span> <span class="pre">Having</span> <span class="pre">a</span> <span class="pre">field</span> <span class="pre">doesn't</span> <span class="pre">make</span> <span class="pre">a</span> <span class="pre">difference.\\nviolation(count_with_field)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,count),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,_).\\n\\n%</span> <span class="pre">&#64;hard(text_mark_without_text_channel)</span> <span class="pre">Text</span> <span class="pre">mark</span> <span class="pre">requires</span> <span class="pre">text</span> <span class="pre">encoding.\\nviolation(text_mark_without_text_channel)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,text).\\n\\n%</span> <span class="pre">&#64;hard(text_channel_without_text_mark)</span> <span class="pre">Text</span> <span class="pre">channel</span> <span class="pre">requires</span> <span class="pre">text</span> <span class="pre">mark.\\nviolation(text_channel_without_text_mark)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,text),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,text).\\n\\n%</span> <span class="pre">&#64;hard(point_tick_bar_without_x_or_y)</span> <span class="pre">Point,</span> <span class="pre">tick,</span> <span class="pre">and</span> <span class="pre">bar</span> <span class="pre">require</span> <span class="pre">x</span> <span class="pre">or</span> <span class="pre">y</span> <span class="pre">channel.\\nviolation(point_tick_bar_without_x_or_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(point;tick;bar)),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,y).\\n\\n%</span> <span class="pre">&#64;hard(line_area_without_x_y)</span> <span class="pre">Line</span> <span class="pre">and</span> <span class="pre">area</span> <span class="pre">require</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y</span> <span class="pre">channel.\\nviolation(line_area_without_x_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(line;area)),\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">attribute((mark,channel),M,x);attribute((mark,channel),M,y)</span> <span class="pre">}</span> <span class="pre">&lt;=</span> <span class="pre">1.\\n\\n%</span> <span class="pre">&#64;hard(line_area_with_discrete)</span> <span class="pre">Line</span> <span class="pre">and</span> <span class="pre">area</span> <span class="pre">cannot</span> <span class="pre">have</span> <span class="pre">both</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y</span> <span class="pre">discrete.\\nviolation(line_area_with_discrete)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(line;area)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T1,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T2,y),\\n</span>&#160;&#160;&#160; <span class="pre">domain(discrete_scale,T1),\\n</span>&#160;&#160;&#160; <span class="pre">domain(discrete_scale,T2).\\n\\n%</span> <span class="pre">&#64;hard(bar_tick_continuous_x_y)</span> <span class="pre">Bar</span> <span class="pre">and</span> <span class="pre">tick</span> <span class="pre">cannot</span> <span class="pre">have</span> <span class="pre">both</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y</span> <span class="pre">continuous.\\nviolation(bar_tick_continuous_x_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(tick;bar)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_scale,M,T1,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_scale,M,T2,y),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T1),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T2).\\n\\n%</span> <span class="pre">&#64;hard(view_scale_conflict)</span> <span class="pre">A</span> <span class="pre">view</span> <span class="pre">cannot</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">scale</span> <span class="pre">definition</span> <span class="pre">that</span> <span class="pre">conflicts</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">shared</span> <span class="pre">scale</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">channel.\\nviolation(view_scale_conflict)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(view,R,V),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,R,S1),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S2),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S1,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S2,C).\\n\\n%</span> <span class="pre">&#64;hard(shape_without_point)</span> <span class="pre">Shape</span> <span class="pre">channel</span> <span class="pre">requires</span> <span class="pre">point</span> <span class="pre">mark.\\nviolation(shape_without_point)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,shape),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,point).\\n\\n%</span> <span class="pre">&#64;hard(size_without_point_text)</span> <span class="pre">Size</span> <span class="pre">only</span> <span class="pre">works</span> <span class="pre">with</span> <span class="pre">some</span> <span class="pre">marks.\\nviolation(size_without_point_text)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,size),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,text),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,point).\\n\\n%</span> <span class="pre">&#64;hard(detail_without_agg)</span> <span class="pre">Detail</span> <span class="pre">requires</span> <span class="pre">aggregation.</span> <span class="pre">Detail</span> <span class="pre">adds</span> <span class="pre">a</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">group</span> <span class="pre">by.</span> <span class="pre">Detail</span> <span class="pre">could</span> <span class="pre">also</span> <span class="pre">be</span> <span class="pre">used</span> <span class="pre">to</span> <span class="pre">add</span> <span class="pre">information</span> <span class="pre">to</span> <span class="pre">tooltips.</span> <span class="pre">We</span> <span class="pre">may</span> <span class="pre">remove</span> <span class="pre">this</span> <span class="pre">later.\\nviolation(detail_without_agg)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E1),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E2),\\n</span>&#160;&#160;&#160; <span class="pre">E1</span> <span class="pre">!=</span> <span class="pre">E2,\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E1,detail),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E2,_).\\n\\n%</span> <span class="pre">&#64;hard(area_bar_with_log)</span> <span class="pre">Do</span> <span class="pre">not</span> <span class="pre">use</span> <span class="pre">log</span> <span class="pre">for</span> <span class="pre">bar</span> <span class="pre">or</span> <span class="pre">area</span> <span class="pre">mark</span> <span class="pre">as</span> <span class="pre">they</span> <span class="pre">are</span> <span class="pre">often</span> <span class="pre">misleading.</span> <span class="pre">We</span> <span class="pre">may</span> <span class="pre">remove</span> <span class="pre">this</span> <span class="pre">rule</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">future.\\nviolation(area_bar_with_log)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(bar;area)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,log,(x;y)).\\n\\n%</span> <span class="pre">&#64;hard(rect_without_d_d)</span> <span class="pre">Rect</span> <span class="pre">mark</span> <span class="pre">needs</span> <span class="pre">discrete</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y.\\nviolation(rect_without_d_d)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,rect),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,(x;y)),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T).\\n\\n%</span> <span class="pre">&#64;hard(same_field_x_and_y)</span> <span class="pre">Don't</span> <span class="pre">use</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">field</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y.\\nviolation(same_field_x_and_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_field,M,x,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_field,M,y,F),\\n</span>&#160;&#160;&#160; <span class="pre">entity(field,root,F),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M).\\n\\n%</span> <span class="pre">&#64;hard(count_twice)</span> <span class="pre">Don't</span> <span class="pre">use</span> <span class="pre">count</span> <span class="pre">twice.\\nviolation(count_twice):-\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">entity(encoding,M,E)</span> <span class="pre">:</span> <span class="pre">attribute((encoding,aggregate),E,count)</span> <span class="pre">}</span> <span class="pre">&gt;=</span> <span class="pre">2,\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M).\\n\\n%</span> <span class="pre">&#64;hard(aggregate_not_all_continuous)</span> <span class="pre">If</span> <span class="pre">we</span> <span class="pre">use</span> <span class="pre">aggregation,</span> <span class="pre">then</span> <span class="pre">all</span> <span class="pre">continuous</span> <span class="pre">scales</span> <span class="pre">need</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">aggregated.\\nviolation(aggregate_not_all_continuous):-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E1,_),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E1),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E2),\\n</span>&#160;&#160;&#160; <span class="pre">E1</span> <span class="pre">&gt;</span> <span class="pre">E2,\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E2,T),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,binning),E2,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E2,_).\\n\\n%</span> <span class="pre">&#64;hard(detail_not_ordinal)</span> <span class="pre">Detail</span> <span class="pre">requires</span> <span class="pre">ordinal</span> <span class="pre">scales.\\nviolation(detail_not_ordinal)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,detail),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,type),S,ordinal).\\n\\n%</span> <span class="pre">&#64;hard(bar_tick_area_line_without_continuous_x_y)</span> <span class="pre">Bar,</span> <span class="pre">tick,</span> <span class="pre">line,</span> <span class="pre">area</span> <span class="pre">require</span> <span class="pre">some</span> <span class="pre">continuous</span> <span class="pre">variable</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">or</span> <span class="pre">y.\\nviolation(bar_tick_area_line_without_continuous_x_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(bar;tick;area;line)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,y).\\n\\n%</span> <span class="pre">&#64;hard(zero_d_n)</span> <span class="pre">Can</span> <span class="pre">only</span> <span class="pre">use</span> <span class="pre">zero</span> <span class="pre">with</span> <span class="pre">datetime</span> <span class="pre">or</span> <span class="pre">number.\\nviolation(zero_d_n)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,scale),M,S),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,zero),S,_),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,T),\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">datetime,\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">number.\\n\\n%</span> <span class="pre">&#64;hard(bar_area_without_zero)</span> <span class="pre">Bar</span> <span class="pre">and</span> <span class="pre">area</span> <span class="pre">mark</span> <span class="pre">requires</span> <span class="pre">scale</span> <span class="pre">of</span> <span class="pre">continuous</span> <span class="pre">to</span> <span class="pre">start</span> <span class="pre">at</span> <span class="pre">zero.\\nviolation(bar_area_without_zero)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(bar;area)),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,scale),M,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,type),S,T),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,zero),S,_),\\n</span>&#160;&#160;&#160; <span class="pre">C</span> <span class="pre">=</span> <span class="pre">(x;y).\\n\\n%</span> <span class="pre">&#64;hard(row_no_y)</span> <span class="pre">Don't</span> <span class="pre">use</span> <span class="pre">row</span> <span class="pre">without</span> <span class="pre">y.</span> <span class="pre">Just</span> <span class="pre">using</span> <span class="pre">y</span> <span class="pre">is</span> <span class="pre">simpler.\\nviolation(row_no_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,row),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,y).\\n\\n%</span> <span class="pre">&#64;hard(col_no_x)</span> <span class="pre">Don't</span> <span class="pre">use</span> <span class="pre">column</span> <span class="pre">without</span> <span class="pre">x.</span> <span class="pre">Just</span> <span class="pre">using</span> <span class="pre">x</span> <span class="pre">is</span> <span class="pre">simpler.\\nviolation(col_no_x)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,col),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,x).\\n\\n%</span> <span class="pre">&#64;hard(stack_without_bar_area)</span> <span class="pre">Only</span> <span class="pre">use</span> <span class="pre">stacking</span> <span class="pre">for</span> <span class="pre">bar</span> <span class="pre">and</span> <span class="pre">area.\\nviolation(stack_without_bar_area)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_with_stack,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,bar),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,area).\\n\\n%</span> <span class="pre">&#64;hard(stack_without_summative_agg)</span> <span class="pre">Don't</span> <span class="pre">stack</span> <span class="pre">if</span> <span class="pre">aggregation</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">summative</span> <span class="pre">(summative</span> <span class="pre">are</span> <span class="pre">count,</span> <span class="pre">sum,</span> <span class="pre">distinct,</span> <span class="pre">valid,</span> <span class="pre">missing).\\nviolation(stack_without_summative_agg)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,_,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,sum),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,count).\\n\\n%</span> <span class="pre">&#64;hard(no_stack_with_bar_area_discrete_color)</span> <span class="pre">Need</span> <span class="pre">to</span> <span class="pre">stack</span> <span class="pre">if</span> <span class="pre">we</span> <span class="pre">use</span> <span class="pre">bar,</span> <span class="pre">area</span> <span class="pre">with</span> <span class="pre">discrete</span> <span class="pre">color.\\nviolation(no_stack_with_bar_area_discrete_color)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(bar;area)),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_with_stack,M).\\n\\n%</span> <span class="pre">&#64;hard(stack_without_discrete_color_or_detail)</span> <span class="pre">Can</span> <span class="pre">only</span> <span class="pre">use</span> <span class="pre">stack</span> <span class="pre">if</span> <span class="pre">we</span> <span class="pre">also</span> <span class="pre">use</span> <span class="pre">discrete</span> <span class="pre">color,</span> <span class="pre">or</span> <span class="pre">detail.\\nviolation(stack_without_discrete_color_or_detail)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_with_stack,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,color),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,detail).\\n\\n%</span> <span class="pre">&#64;hard(stack_without_x_y)</span> <span class="pre">Stack</span> <span class="pre">can</span> <span class="pre">only</span> <span class="pre">be</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">or</span> <span class="pre">y.\\nviolation(stack_without_x_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,channel),E,y).\\n\\n%</span> <span class="pre">&#64;hard(stack_discrete)</span> <span class="pre">Stack</span> <span class="pre">can</span> <span class="pre">only</span> <span class="pre">be</span> <span class="pre">on</span> <span class="pre">continuous.\\nviolation(stack_discrete)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,_,C).\\n\\n%</span> <span class="pre">&#64;hard(stack_with_non_positional_non_agg)</span> <span class="pre">Cannot</span> <span class="pre">use</span> <span class="pre">non</span> <span class="pre">positional</span> <span class="pre">continuous</span> <span class="pre">with</span> <span class="pre">stack</span> <span class="pre">unless</span> <span class="pre">it's</span> <span class="pre">aggregated.\\nviolation(stack_with_non_positional_non_agg)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_with_stack,M),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">domain(non_positional,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,C).\\n\\n%</span> <span class="pre">&#64;hard(invalid_bin)</span> <span class="pre">Check</span> <span class="pre">bin</span> <span class="pre">type.\\nviolation(invalid_bin)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),_,B),\\n</span>&#160;&#160;&#160; <span class="pre">B</span> <span class="pre">&lt;</span> <span class="pre">0.\\n\\n%</span> <span class="pre">&#64;hard(invalid_num_rows)</span> <span class="pre">number_rows</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">larger</span> <span class="pre">than</span> <span class="pre">0.\\nviolation(invalid_num_rows)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(number_rows,root,R),\\n</span>&#160;&#160;&#160; <span class="pre">R</span> <span class="pre">&lt;=</span> <span class="pre">0.\\n\\n%</span> <span class="pre">&#64;hard(invalid_unique)</span> <span class="pre">The</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">unique</span> <span class="pre">values</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">larger</span> <span class="pre">than</span> <span class="pre">0.\\nviolation(invalid_unique)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,unique),_,U),\\n</span>&#160;&#160;&#160; <span class="pre">U</span> <span class="pre">&lt;=</span> <span class="pre">0.\\n\\n%</span> <span class="pre">&#64;hard(invalid_extent_non_number)</span> <span class="pre">Extent</span> <span class="pre">only</span> <span class="pre">allowed</span> <span class="pre">for</span> <span class="pre">numbers</span> <span class="pre">(for</span> <span class="pre">now).\\nviolation(invalid_extent_non_number)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,(min;max)),F,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((field,type),F,number).\\n\\n%</span> <span class="pre">&#64;hard(invalid_non_number_std)</span> <span class="pre">Std</span> <span class="pre">only</span> <span class="pre">allowed</span> <span class="pre">for</span> <span class="pre">numbers</span> <span class="pre">(for</span> <span class="pre">now).\\nviolation(invalid_non_number_std)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,std),F,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((field,type),F,number).\\n\\n%</span> <span class="pre">&#64;hard(invalid_std)</span> <span class="pre">Std</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">larger</span> <span class="pre">or</span> <span class="pre">equal</span> <span class="pre">to</span> <span class="pre">0.\\nviolation(invalid_std)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,std),_,S),\\n</span>&#160;&#160;&#160; <span class="pre">S</span> <span class="pre">&lt;</span> <span class="pre">0.\\n\\n%</span> <span class="pre">&#64;hard(invalid_extent_order)</span> <span class="pre">Order</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">correct.\\nviolation(invalid_extent_order)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,min),F,MIN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,max),F,MAX),\\n</span>&#160;&#160;&#160; <span class="pre">MIN</span> <span class="pre">&gt;</span> <span class="pre">MAX.\\n\\n%</span> <span class="pre">&#64;hard(invalid_non_string_freq)</span> <span class="pre">Frequency</span> <span class="pre">for</span> <span class="pre">strings</span> <span class="pre">only.\\nviolation(invalid_non_string_freq)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,freq),F,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((field,type),F,string).\\n&quot;,</span> <span class="pre">blocks={'__preamble__':</span> <span class="pre">'%</span> <span class="pre">======</span> <span class="pre">Hard</span> <span class="pre">constraints</span> <span class="pre">======\\n',</span> <span class="pre">'scale_type_data_type':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Primitive</span> <span class="pre">type</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">support</span> <span class="pre">scale</span> <span class="pre">type.',</span> <span class="pre">program='violation(scale_type_data_type)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,(string;boolean)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,T),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T).\\n'),</span> <span class="pre">'log_non_positive':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Cannot</span> <span class="pre">use</span> <span class="pre">log</span> <span class="pre">if</span> <span class="pre">the</span> <span class="pre">data</span> <span class="pre">is</span> <span class="pre">negative</span> <span class="pre">or</span> <span class="pre">zero.',</span> <span class="pre">program='violation(log_non_positive)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,min),F,MIN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log),\\n</span>&#160;&#160;&#160; <span class="pre">MIN</span> <span class="pre">&lt;=</span> <span class="pre">0.\\n'),</span> <span class="pre">'bin_and_aggregate':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Cannot</span> <span class="pre">bin</span> <span class="pre">and</span> <span class="pre">aggregate.',</span> <span class="pre">program='violation(bin_and_aggregate)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,_).\\n'),</span> <span class="pre">'aggregate_t_valid':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Temporal</span> <span class="pre">scale</span> <span class="pre">only</span> <span class="pre">supports</span> <span class="pre">min</span> <span class="pre">and</span> <span class="pre">max.',</span> <span class="pre">program='violation(aggregate_t_valid)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,datetime),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,A),\\n</span>&#160;&#160;&#160; <span class="pre">A</span> <span class="pre">!=</span> <span class="pre">min,\\n</span>&#160;&#160;&#160; <span class="pre">A</span> <span class="pre">!=</span> <span class="pre">max.\\n'),</span> <span class="pre">'aggregate_num_valid':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Only</span> <span class="pre">numbers</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">aggregated</span> <span class="pre">with</span> <span class="pre">mean,</span> <span class="pre">sum,</span> <span class="pre">stdev',</span> <span class="pre">program='violation(aggregate_num_valid)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,T),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,(mean;sum;stdev)),\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">number.\\n'),</span> <span class="pre">'bin_n_d':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Only</span> <span class="pre">numbers</span> <span class="pre">and</span> <span class="pre">datetimes</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">binned',</span> <span class="pre">program='violation(bin_n_d)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,T),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">number,\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">datetime.\\n'),</span> <span class="pre">'aggregate_detail':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Detail</span> <span class="pre">cannot</span> <span class="pre">be</span> <span class="pre">aggregated.',</span> <span class="pre">program='violation(aggregate_detail)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,detail),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,_).\\n'),</span> <span class="pre">'count_without_q':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Count</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">continuous</span> <span class="pre">scale.',</span> <span class="pre">program='violation(count_without_q)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,count),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,T),\\n</span>&#160;&#160;&#160; <span class="pre">domain(discrete_scale,T).\\n'),</span> <span class="pre">'shape_not_ordinal':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description=&quot;Shape</span> <span class="pre">requires</span> <span class="pre">discrete</span> <span class="pre">and</span> <span class="pre">ordinal</span> <span class="pre">(ordinal/categorical</span> <span class="pre">doesn't</span> <span class="pre">matter</span> <span class="pre">as</span> <span class="pre">scale</span> <span class="pre">types,</span> <span class="pre">so</span> <span class="pre">we</span> <span class="pre">use</span> <span class="pre">oridnal</span> <span class="pre">only</span> <span class="pre">here).&quot;,</span> <span class="pre">program='violation(shape_not_ordinal)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,_,T,shape),\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">ordinal.\\n'),</span> <span class="pre">'categorical_not_color':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Categorical</span> <span class="pre">only</span> <span class="pre">works</span> <span class="pre">with</span> <span class="pre">color</span> <span class="pre">channel.',</span> <span class="pre">program='violation(categorical_not_color)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,type),S,categorical),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,channel),S,color).\\n'),</span> <span class="pre">'size_negative':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Do</span> <span class="pre">not</span> <span class="pre">use</span> <span class="pre">size</span> <span class="pre">when</span> <span class="pre">data</span> <span class="pre">is</span> <span class="pre">negative</span> <span class="pre">as</span> <span class="pre">size</span> <span class="pre">implies</span> <span class="pre">that</span> <span class="pre">data</span> <span class="pre">is</span> <span class="pre">positive.',</span> <span class="pre">program='violation(size_negative)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,min),F,MIN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,max),F,MAX),\\n</span>&#160;&#160;&#160; <span class="pre">MIN</span> <span class="pre">&lt;</span> <span class="pre">0,\\n</span>&#160;&#160;&#160; <span class="pre">MAX</span> <span class="pre">&gt;</span> <span class="pre">0.\\n'),</span> <span class="pre">'encoding_repeat_channel':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Cannot</span> <span class="pre">use</span> <span class="pre">single</span> <span class="pre">channels</span> <span class="pre">twice</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">mark.',</span> <span class="pre">program='violation(encoding_repeat_channel)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E1),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E2),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E1,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E2,C),\\n</span>&#160;&#160;&#160; <span class="pre">E1</span> <span class="pre">&gt;</span> <span class="pre">E2.\\n'),</span> <span class="pre">'scale_repeat_channel':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Cannot</span> <span class="pre">use</span> <span class="pre">single</span> <span class="pre">channels</span> <span class="pre">twice</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">view.',</span> <span class="pre">program='violation(scale_repeat_channel)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S1),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S2),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S1,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S2,C),\\n</span>&#160;&#160;&#160; <span class="pre">S1</span> <span class="pre">&gt;</span> <span class="pre">S2.\\n'),</span> <span class="pre">'encoding_channel_without_scale':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description=&quot;Encoding</span> <span class="pre">channel</span> <span class="pre">doesn't</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">corresponding</span> <span class="pre">scale</span> <span class="pre">channel.&quot;,</span> <span class="pre">program='violation(encoding_channel_without_scale)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">domain(scale_channel,V,C).\\n'),</span> <span class="pre">'scale_channel_without_encoding':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description=&quot;Scale</span> <span class="pre">channel</span> <span class="pre">doesn't</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">corresponding</span> <span class="pre">encoding</span> <span class="pre">channel.&quot;,</span> <span class="pre">program='violation(scale_channel_without_encoding)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(view,_,V),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">domain(encoding_channel,V,C).\\n'),</span> <span class="pre">'no_encodings':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='There</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">at</span> <span class="pre">least</span> <span class="pre">one</span> <span class="pre">encoding</span> <span class="pre">for</span> <span class="pre">every</span> <span class="pre">mark.',</span> <span class="pre">program='violation(no_encodings)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">entity(encoding,M,_).\\n'),</span> <span class="pre">'encoding_no_field_and_not_count':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='All</span> <span class="pre">encodings</span> <span class="pre">(if</span> <span class="pre">they</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">channel)</span> <span class="pre">require</span> <span class="pre">field</span> <span class="pre">except</span> <span class="pre">if</span> <span class="pre">we</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">count</span> <span class="pre">aggregate.',</span> <span class="pre">program='violation(encoding_no_field_and_not_count)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,_,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,field),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,count).\\n'),</span> <span class="pre">'count_with_field':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description=&quot;Count</span> <span class="pre">should</span> <span class="pre">not</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">field.</span> <span class="pre">Having</span> <span class="pre">a</span> <span class="pre">field</span> <span class="pre">doesn't</span> <span class="pre">make</span> <span class="pre">a</span> <span class="pre">difference.&quot;,</span> <span class="pre">program='violation(count_with_field)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,count),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,_).\\n'),</span> <span class="pre">'text_mark_without_text_channel':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Text</span> <span class="pre">mark</span> <span class="pre">requires</span> <span class="pre">text</span> <span class="pre">encoding.',</span> <span class="pre">program='violation(text_mark_without_text_channel)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,text).\\n'),</span> <span class="pre">'text_channel_without_text_mark':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Text</span> <span class="pre">channel</span> <span class="pre">requires</span> <span class="pre">text</span> <span class="pre">mark.',</span> <span class="pre">program='violation(text_channel_without_text_mark)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,text),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,text).\\n'),</span> <span class="pre">'point_tick_bar_without_x_or_y':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Point,</span> <span class="pre">tick,</span> <span class="pre">and</span> <span class="pre">bar</span> <span class="pre">require</span> <span class="pre">x</span> <span class="pre">or</span> <span class="pre">y</span> <span class="pre">channel.',</span> <span class="pre">program='violation(point_tick_bar_without_x_or_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(point;tick;bar)),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,y).\\n'),</span> <span class="pre">'line_area_without_x_y':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Line</span> <span class="pre">and</span> <span class="pre">area</span> <span class="pre">require</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y</span> <span class="pre">channel.',</span> <span class="pre">program='violation(line_area_without_x_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(line;area)),\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">attribute((mark,channel),M,x);attribute((mark,channel),M,y)</span> <span class="pre">}</span> <span class="pre">&lt;=</span> <span class="pre">1.\\n'),</span> <span class="pre">'line_area_with_discrete':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Line</span> <span class="pre">and</span> <span class="pre">area</span> <span class="pre">cannot</span> <span class="pre">have</span> <span class="pre">both</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y</span> <span class="pre">discrete.',</span> <span class="pre">program='violation(line_area_with_discrete)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(line;area)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T1,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T2,y),\\n</span>&#160;&#160;&#160; <span class="pre">domain(discrete_scale,T1),\\n</span>&#160;&#160;&#160; <span class="pre">domain(discrete_scale,T2).\\n'),</span> <span class="pre">'bar_tick_continuous_x_y':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Bar</span> <span class="pre">and</span> <span class="pre">tick</span> <span class="pre">cannot</span> <span class="pre">have</span> <span class="pre">both</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y</span> <span class="pre">continuous.',</span> <span class="pre">program='violation(bar_tick_continuous_x_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(tick;bar)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_scale,M,T1,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_scale,M,T2,y),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T1),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T2).\\n'),</span> <span class="pre">'view_scale_conflict':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='A</span> <span class="pre">view</span> <span class="pre">cannot</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">scale</span> <span class="pre">definition</span> <span class="pre">that</span> <span class="pre">conflicts</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">shared</span> <span class="pre">scale</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">channel.',</span> <span class="pre">program='violation(view_scale_conflict)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(view,R,V),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,R,S1),\\n</span>&#160;&#160;&#160; <span class="pre">entity(scale,V,S2),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S1,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S2,C).\\n'),</span> <span class="pre">'shape_without_point':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Shape</span> <span class="pre">channel</span> <span class="pre">requires</span> <span class="pre">point</span> <span class="pre">mark.',</span> <span class="pre">program='violation(shape_without_point)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,shape),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,point).\\n'),</span> <span class="pre">'size_without_point_text':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Size</span> <span class="pre">only</span> <span class="pre">works</span> <span class="pre">with</span> <span class="pre">some</span> <span class="pre">marks.',</span> <span class="pre">program='violation(size_without_point_text)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,size),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,text),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,point).\\n'),</span> <span class="pre">'detail_without_agg':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Detail</span> <span class="pre">requires</span> <span class="pre">aggregation.</span> <span class="pre">Detail</span> <span class="pre">adds</span> <span class="pre">a</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">group</span> <span class="pre">by.</span> <span class="pre">Detail</span> <span class="pre">could</span> <span class="pre">also</span> <span class="pre">be</span> <span class="pre">used</span> <span class="pre">to</span> <span class="pre">add</span> <span class="pre">information</span> <span class="pre">to</span> <span class="pre">tooltips.</span> <span class="pre">We</span> <span class="pre">may</span> <span class="pre">remove</span> <span class="pre">this</span> <span class="pre">later.',</span> <span class="pre">program='violation(detail_without_agg)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E1),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E2),\\n</span>&#160;&#160;&#160; <span class="pre">E1</span> <span class="pre">!=</span> <span class="pre">E2,\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E1,detail),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E2,_).\\n'),</span> <span class="pre">'area_bar_with_log':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Do</span> <span class="pre">not</span> <span class="pre">use</span> <span class="pre">log</span> <span class="pre">for</span> <span class="pre">bar</span> <span class="pre">or</span> <span class="pre">area</span> <span class="pre">mark</span> <span class="pre">as</span> <span class="pre">they</span> <span class="pre">are</span> <span class="pre">often</span> <span class="pre">misleading.</span> <span class="pre">We</span> <span class="pre">may</span> <span class="pre">remove</span> <span class="pre">this</span> <span class="pre">rule</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">future.',</span> <span class="pre">program='violation(area_bar_with_log)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(bar;area)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,log,(x;y)).\\n'),</span> <span class="pre">'rect_without_d_d':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Rect</span> <span class="pre">mark</span> <span class="pre">needs</span> <span class="pre">discrete</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y.',</span> <span class="pre">program='violation(rect_without_d_d)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,rect),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_scale_channel,M,T,(x;y)),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T).\\n'),</span> <span class="pre">'same_field_x_and_y':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description=&quot;Don't</span> <span class="pre">use</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">field</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y.&quot;,</span> <span class="pre">program='violation(same_field_x_and_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_field,M,x,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_field,M,y,F),\\n</span>&#160;&#160;&#160; <span class="pre">entity(field,root,F),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M).\\n'),</span> <span class="pre">'count_twice':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description=&quot;Don't</span> <span class="pre">use</span> <span class="pre">count</span> <span class="pre">twice.&quot;,</span> <span class="pre">program='violation(count_twice):-\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">entity(encoding,M,E)</span> <span class="pre">:</span> <span class="pre">attribute((encoding,aggregate),E,count)</span> <span class="pre">}</span> <span class="pre">&gt;=</span> <span class="pre">2,\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M).\\n'),</span> <span class="pre">'aggregate_not_all_continuous':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='If</span> <span class="pre">we</span> <span class="pre">use</span> <span class="pre">aggregation,</span> <span class="pre">then</span> <span class="pre">all</span> <span class="pre">continuous</span> <span class="pre">scales</span> <span class="pre">need</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">aggregated.',</span> <span class="pre">program='violation(aggregate_not_all_continuous):-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E1,_),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E1),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E2),\\n</span>&#160;&#160;&#160; <span class="pre">E1</span> <span class="pre">&gt;</span> <span class="pre">E2,\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E2,T),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,binning),E2,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E2,_).\\n'),</span> <span class="pre">'detail_not_ordinal':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Detail</span> <span class="pre">requires</span> <span class="pre">ordinal</span> <span class="pre">scales.',</span> <span class="pre">program='violation(detail_not_ordinal)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,detail),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,type),S,ordinal).\\n'),</span> <span class="pre">'bar_tick_area_line_without_continuous_x_y':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Bar,</span> <span class="pre">tick,</span> <span class="pre">line,</span> <span class="pre">area</span> <span class="pre">require</span> <span class="pre">some</span> <span class="pre">continuous</span> <span class="pre">variable</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">or</span> <span class="pre">y.',</span> <span class="pre">program='violation(bar_tick_area_line_without_continuous_x_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(bar;tick;area;line)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,y).\\n'),</span> <span class="pre">'zero_d_n':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Can</span> <span class="pre">only</span> <span class="pre">use</span> <span class="pre">zero</span> <span class="pre">with</span> <span class="pre">datetime</span> <span class="pre">or</span> <span class="pre">number.',</span> <span class="pre">program='violation(zero_d_n)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,scale),M,S),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,zero),S,_),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,T),\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">datetime,\\n</span>&#160;&#160;&#160; <span class="pre">T</span> <span class="pre">!=</span> <span class="pre">number.\\n'),</span> <span class="pre">'bar_area_without_zero':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Bar</span> <span class="pre">and</span> <span class="pre">area</span> <span class="pre">mark</span> <span class="pre">requires</span> <span class="pre">scale</span> <span class="pre">of</span> <span class="pre">continuous</span> <span class="pre">to</span> <span class="pre">start</span> <span class="pre">at</span> <span class="pre">zero.',</span> <span class="pre">program='violation(bar_area_without_zero)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(bar;area)),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,scale),M,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,channel),S,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,type),S,T),\\n</span>&#160;&#160;&#160; <span class="pre">domain(continuous_scale,T),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,zero),S,_),\\n</span>&#160;&#160;&#160; <span class="pre">C</span> <span class="pre">=</span> <span class="pre">(x;y).\\n'),</span> <span class="pre">'row_no_y':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description=&quot;Don't</span> <span class="pre">use</span> <span class="pre">row</span> <span class="pre">without</span> <span class="pre">y.</span> <span class="pre">Just</span> <span class="pre">using</span> <span class="pre">y</span> <span class="pre">is</span> <span class="pre">simpler.&quot;,</span> <span class="pre">program='violation(row_no_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,row),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,y).\\n'),</span> <span class="pre">'col_no_x':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description=&quot;Don't</span> <span class="pre">use</span> <span class="pre">column</span> <span class="pre">without</span> <span class="pre">x.</span> <span class="pre">Just</span> <span class="pre">using</span> <span class="pre">x</span> <span class="pre">is</span> <span class="pre">simpler.&quot;,</span> <span class="pre">program='violation(col_no_x)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,col),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,x).\\n'),</span> <span class="pre">'stack_without_bar_area':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Only</span> <span class="pre">use</span> <span class="pre">stacking</span> <span class="pre">for</span> <span class="pre">bar</span> <span class="pre">and</span> <span class="pre">area.',</span> <span class="pre">program='violation(stack_without_bar_area)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_with_stack,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,bar),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,type),M,area).\\n'),</span> <span class="pre">'stack_without_summative_agg':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description=&quot;Don't</span> <span class="pre">stack</span> <span class="pre">if</span> <span class="pre">aggregation</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">summative</span> <span class="pre">(summative</span> <span class="pre">are</span> <span class="pre">count,</span> <span class="pre">sum,</span> <span class="pre">distinct,</span> <span class="pre">valid,</span> <span class="pre">missing).&quot;,</span> <span class="pre">program='violation(stack_without_summative_agg)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,_,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,sum),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,count).\\n'),</span> <span class="pre">'no_stack_with_bar_area_discrete_color':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Need</span> <span class="pre">to</span> <span class="pre">stack</span> <span class="pre">if</span> <span class="pre">we</span> <span class="pre">use</span> <span class="pre">bar,</span> <span class="pre">area</span> <span class="pre">with</span> <span class="pre">discrete</span> <span class="pre">color.',</span> <span class="pre">program='violation(no_stack_with_bar_area_discrete_color)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,(bar;area)),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_with_stack,M).\\n'),</span> <span class="pre">'stack_without_discrete_color_or_detail':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Can</span> <span class="pre">only</span> <span class="pre">use</span> <span class="pre">stack</span> <span class="pre">if</span> <span class="pre">we</span> <span class="pre">also</span> <span class="pre">use</span> <span class="pre">discrete</span> <span class="pre">color,</span> <span class="pre">or</span> <span class="pre">detail.',</span> <span class="pre">program='violation(stack_without_discrete_color_or_detail)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_with_stack,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,color),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,detail).\\n'),</span> <span class="pre">'stack_without_x_y':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Stack</span> <span class="pre">can</span> <span class="pre">only</span> <span class="pre">be</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">or</span> <span class="pre">y.',</span> <span class="pre">program='violation(stack_without_x_y)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,channel),E,y).\\n'),</span> <span class="pre">'stack_discrete':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Stack</span> <span class="pre">can</span> <span class="pre">only</span> <span class="pre">be</span> <span class="pre">on</span> <span class="pre">continuous.',</span> <span class="pre">program='violation(stack_discrete)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,_,C).\\n'),</span> <span class="pre">'stack_with_non_positional_non_agg':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description=&quot;Cannot</span> <span class="pre">use</span> <span class="pre">non</span> <span class="pre">positional</span> <span class="pre">continuous</span> <span class="pre">with</span> <span class="pre">stack</span> <span class="pre">unless</span> <span class="pre">it's</span> <span class="pre">aggregated.&quot;,</span> <span class="pre">program='violation(stack_with_non_positional_non_agg)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_with_stack,M),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,C),\\n</span>&#160;&#160;&#160; <span class="pre">domain(non_positional,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,C).\\n'),</span> <span class="pre">'invalid_bin':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Check</span> <span class="pre">bin</span> <span class="pre">type.',</span> <span class="pre">program='violation(invalid_bin)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),_,B),\\n</span>&#160;&#160;&#160; <span class="pre">B</span> <span class="pre">&lt;</span> <span class="pre">0.\\n'),</span> <span class="pre">'invalid_num_rows':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='number_rows</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">larger</span> <span class="pre">than</span> <span class="pre">0.',</span> <span class="pre">program='violation(invalid_num_rows)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(number_rows,root,R),\\n</span>&#160;&#160;&#160; <span class="pre">R</span> <span class="pre">&lt;=</span> <span class="pre">0.\\n'),</span> <span class="pre">'invalid_unique':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='The</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">unique</span> <span class="pre">values</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">larger</span> <span class="pre">than</span> <span class="pre">0.',</span> <span class="pre">program='violation(invalid_unique)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,unique),_,U),\\n</span>&#160;&#160;&#160; <span class="pre">U</span> <span class="pre">&lt;=</span> <span class="pre">0.\\n'),</span> <span class="pre">'invalid_extent_non_number':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Extent</span> <span class="pre">only</span> <span class="pre">allowed</span> <span class="pre">for</span> <span class="pre">numbers</span> <span class="pre">(for</span> <span class="pre">now).',</span> <span class="pre">program='violation(invalid_extent_non_number)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,(min;max)),F,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((field,type),F,number).\\n'),</span> <span class="pre">'invalid_non_number_std':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Std</span> <span class="pre">only</span> <span class="pre">allowed</span> <span class="pre">for</span> <span class="pre">numbers</span> <span class="pre">(for</span> <span class="pre">now).',</span> <span class="pre">program='violation(invalid_non_number_std)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,std),F,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((field,type),F,number).\\n'),</span> <span class="pre">'invalid_std':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Std</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">larger</span> <span class="pre">or</span> <span class="pre">equal</span> <span class="pre">to</span> <span class="pre">0.',</span> <span class="pre">program='violation(invalid_std)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,std),_,S),\\n</span>&#160;&#160;&#160; <span class="pre">S</span> <span class="pre">&lt;</span> <span class="pre">0.\\n'),</span> <span class="pre">'invalid_extent_order':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Order</span> <span class="pre">has</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">correct.',</span> <span class="pre">program='violation(invalid_extent_order)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,min),F,MIN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,max),F,MAX),\\n</span>&#160;&#160;&#160; <span class="pre">MIN</span> <span class="pre">&gt;</span> <span class="pre">MAX.\\n'),</span> <span class="pre">'invalid_non_string_freq':</span> <span class="pre">Block(block_type='hard',</span> <span class="pre">description='Frequency</span> <span class="pre">for</span> <span class="pre">strings</span> <span class="pre">only.',</span> <span class="pre">program='violation(invalid_non_string_freq)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,freq),F,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((field,type),F,string).\\n')})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">soft</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Program(program=&quot;%</span> <span class="pre">======</span> <span class="pre">Preferences</span> <span class="pre">======\\n\\n%</span> <span class="pre">&#64;soft(aggregate)</span> <span class="pre">Prefer</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">raw</span> <span class="pre">(no</span> <span class="pre">aggregate).\\npreference(aggregate,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,_).\\n\\n%</span> <span class="pre">&#64;soft(bin)</span> <span class="pre">Prefer</span> <span class="pre">to</span> <span class="pre">not</span> <span class="pre">bin.\\npreference(bin,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_).\\n\\n%</span> <span class="pre">&#64;soft(bin_high)</span> <span class="pre">Prefer</span> <span class="pre">binning</span> <span class="pre">with</span> <span class="pre">at</span> <span class="pre">most</span> <span class="pre">12</span> <span class="pre">buckets.\\npreference(bin_high,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,B),</span> <span class="pre">B</span> <span class="pre">&gt;</span> <span class="pre">12.\\n\\n%</span> <span class="pre">&#64;soft(bin_low)</span> <span class="pre">Prefer</span> <span class="pre">binning</span> <span class="pre">with</span> <span class="pre">more</span> <span class="pre">than</span> <span class="pre">7</span> <span class="pre">buckets.\\npreference(bin_low,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,B),</span> <span class="pre">B</span> <span class="pre">&lt;=</span> <span class="pre">7.\\n\\n%</span> <span class="pre">&#64;soft(encoding)</span> <span class="pre">Prefer</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">fewer</span> <span class="pre">encodings.\\npreference(encoding,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,_,E).\\n\\n%</span> <span class="pre">&#64;soft(encoding_field)</span> <span class="pre">Prefer</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">fewer</span> <span class="pre">encodings</span> <span class="pre">with</span> <span class="pre">fields</span> <span class="pre">(count</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">field).\\npreference(encoding_field,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,_).\\n\\n%</span> <span class="pre">&#64;soft(same_field)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">field</span> <span class="pre">twice</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">mark.\\npreference(same_field,F)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(field,_,F),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">entity(encoding,M,E):</span> <span class="pre">attribute((encoding,field),E,F)</span> <span class="pre">}</span> <span class="pre">=</span> <span class="pre">2.\\n\\n%</span> <span class="pre">&#64;soft(same_field_grt3)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">field</span> <span class="pre">three</span> <span class="pre">or</span> <span class="pre">more</span> <span class="pre">times</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">mark.\\npreference(same_field_grt3,F)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(field,_,F),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">entity(encoding,M,E):</span> <span class="pre">attribute((encoding,field),E,F)</span> <span class="pre">}</span> <span class="pre">&gt;=</span> <span class="pre">3.\\n\\n%</span> <span class="pre">&#64;soft(count_grt1)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">count</span> <span class="pre">more</span> <span class="pre">than</span> <span class="pre">once.\\npreference(count_grt1,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">entity(encoding,M,E):</span> <span class="pre">attribute((encoding,aggregate),E,count)</span> <span class="pre">}</span> <span class="pre">&gt;</span> <span class="pre">1.\\n\\n%</span> <span class="pre">&#64;soft(number_categorical)</span> <span class="pre">Should</span> <span class="pre">not</span> <span class="pre">use</span> <span class="pre">categorical</span> <span class="pre">scale</span> <span class="pre">for</span> <span class="pre">number</span> <span class="pre">field.\\npreference(number_categorical,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,number),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,categorical).\\n\\n%</span> <span class="pre">&#64;soft(bin_low_unique)</span> <span class="pre">Binned</span> <span class="pre">field</span> <span class="pre">should</span> <span class="pre">not</span> <span class="pre">have</span> <span class="pre">too</span> <span class="pre">less</span> <span class="pre">unique</span> <span class="pre">values.\\npreference(bin_low_unique,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,(number;datetime)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,unique),F,U),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">U</span> <span class="pre">&lt;</span> <span class="pre">15.\\n\\n%</span> <span class="pre">&#64;soft(bin_not_linear)</span> <span class="pre">Prefer</span> <span class="pre">linear</span> <span class="pre">scale</span> <span class="pre">for</span> <span class="pre">bin.\\npreference(bin_not_linear,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,scale_type),E,linear).\\n\\n%</span> <span class="pre">&#64;soft(only_discrete)</span> <span class="pre">Only</span> <span class="pre">discrete</span> <span class="pre">encoding</span> <span class="pre">channels</span> <span class="pre">are</span> <span class="pre">used</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">mark.\\npreference(only_discrete,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_cont,M,_).\\n\\n\\n%</span> <span class="pre">&#64;soft(multi_non_pos)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">multiple</span> <span class="pre">non-positional</span> <span class="pre">encoding</span> <span class="pre">channels.\\npreference(multi_non_pos,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">attribute((mark,channel),M,C):</span> <span class="pre">domain(non_positional,C)</span> <span class="pre">}</span> <span class="pre">&gt;</span> <span class="pre">1.\\n\\n%</span> <span class="pre">&#64;soft(non_pos_used_before_pos)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">non-positional</span> <span class="pre">channels</span> <span class="pre">until</span> <span class="pre">all</span> <span class="pre">positional</span> <span class="pre">channels</span> <span class="pre">are</span> <span class="pre">used.\\npreference(non_pos_used_before_pos,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,C),\\n</span>&#160;&#160;&#160; <span class="pre">domain(non_positional,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,(x;y)).\\n\\n%</span> <span class="pre">&#64;soft(aggregate_group_by_raw)</span> <span class="pre">Aggregate</span> <span class="pre">plots</span> <span class="pre">should</span> <span class="pre">not</span> <span class="pre">use</span> <span class="pre">raw</span> <span class="pre">continuous</span> <span class="pre">as</span> <span class="pre">group</span> <span class="pre">by.\\npreference(aggregate_group_by_raw,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,EA),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),EA,_),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,_).\\n\\n%</span> <span class="pre">&#64;soft(aggregate_no_discrete)</span> <span class="pre">Aggregate</span> <span class="pre">should</span> <span class="pre">also</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">discrete</span> <span class="pre">encoding</span> <span class="pre">to</span> <span class="pre">group</span> <span class="pre">by.\\npreference(aggregate_no_discrete,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,EA),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),EA,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,_).\\n\\n%</span> <span class="pre">&#64;soft(x_y_raw)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">plot</span> <span class="pre">with</span> <span class="pre">both</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y</span> <span class="pre">discrete</span> <span class="pre">and</span> <span class="pre">no</span> <span class="pre">aggregate</span> <span class="pre">as</span> <span class="pre">it</span> <span class="pre">leads</span> <span class="pre">to</span> <span class="pre">occlusion.\\npreference(x_y_raw,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,y),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,_).\\n\\n%</span> <span class="pre">&#64;soft(continuous_not_zero)</span> <span class="pre">Prefer</span> <span class="pre">to</span> <span class="pre">include</span> <span class="pre">zero</span> <span class="pre">for</span> <span class="pre">continuous</span> <span class="pre">(binned</span> <span class="pre">doesn't</span> <span class="pre">need</span> <span class="pre">zero).\\npreference(continuous_not_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_scale,M,E,S),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,zero),S,true).\\n\\n%</span> <span class="pre">&#64;soft(size_not_zero)</span> <span class="pre">Prefer</span> <span class="pre">zero</span> <span class="pre">size</span> <span class="pre">(even</span> <span class="pre">when</span> <span class="pre">binned).\\npreference(size_not_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_scale,M,E,S),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,zero),S,true).\\n\\n%</span> <span class="pre">&#64;soft(continuous_pos_not_zero)</span> <span class="pre">Prefer</span> <span class="pre">zero</span> <span class="pre">continuous</span> <span class="pre">positional.\\npreference(continuous_pos_not_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,(x;y)),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_scale,M,E,S),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,zero),S,true).\\n\\n%</span> <span class="pre">&#64;soft(skew_zero)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">zero</span> <span class="pre">when</span> <span class="pre">the</span> <span class="pre">difference</span> <span class="pre">between</span> <span class="pre">min</span> <span class="pre">and</span> <span class="pre">max</span> <span class="pre">is</span> <span class="pre">smaller</span> <span class="pre">than</span> <span class="pre">distance</span> <span class="pre">to</span> <span class="pre">0.\\npreference(skew_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,min),F,MIN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,max),F,MAX),\\n</span>&#160;&#160;&#160; <span class="pre">EXT</span> <span class="pre">=</span> <span class="pre">MAX</span> <span class="pre">-</span> <span class="pre">MIN,\\n</span>&#160;&#160;&#160; <span class="pre">|MAX|</span> <span class="pre">&gt;</span> <span class="pre">EXT,\\n</span>&#160;&#160;&#160; <span class="pre">|MIN|</span> <span class="pre">&gt;</span> <span class="pre">EXT,\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_scale,M,E,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,zero),S,true).\\n\\n%</span> <span class="pre">&#64;soft(cross_zero)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">include</span> <span class="pre">zero</span> <span class="pre">as</span> <span class="pre">baseline</span> <span class="pre">when</span> <span class="pre">the</span> <span class="pre">range</span> <span class="pre">of</span> <span class="pre">data</span> <span class="pre">crosses</span> <span class="pre">zero.\\npreference(cross_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,min),F,MIN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,max),F,MAX),\\n</span>&#160;&#160;&#160; <span class="pre">MAX</span> <span class="pre">&gt;</span> <span class="pre">0,\\n</span>&#160;&#160;&#160; <span class="pre">MIN</span> <span class="pre">&lt;</span> <span class="pre">0,\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_scale,M,E,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,zero),S,true).\\n\\n%</span> <span class="pre">&#64;soft(only_y)</span> <span class="pre">Prefer</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">only</span> <span class="pre">x</span> <span class="pre">instead</span> <span class="pre">of</span> <span class="pre">only</span> <span class="pre">y.\\npreference(only_y,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,x).\\n\\n%</span> <span class="pre">&#64;soft(binned_orientation_not_x)</span> <span class="pre">Prefer</span> <span class="pre">binned</span> <span class="pre">quantative</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">axis.\\npreference(binned_orientation_not_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,(number;datetime)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,channel),E,x).\\n\\n%</span> <span class="pre">&#64;soft(high_cardinality_ordinal)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">ordinal</span> <span class="pre">for</span> <span class="pre">fields</span> <span class="pre">with</span> <span class="pre">high</span> <span class="pre">cardinality.\\npreference(high_cardinality_ordinal,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(encoding_cardinality,E,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">30.\\n\\n%</span> <span class="pre">&#64;soft(high_cardinality_categorical_grt10)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">categorical</span> <span class="pre">(color)</span> <span class="pre">for</span> <span class="pre">fields</span> <span class="pre">with</span> <span class="pre">high</span> <span class="pre">cardinality.\\npreference(high_cardinality_categorical_grt10,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(encoding_cardinality,E,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,categorical),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">10.\\n\\n%</span> <span class="pre">&#64;soft(high_cardinality_shape)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">high</span> <span class="pre">cardinality</span> <span class="pre">ordinal</span> <span class="pre">for</span> <span class="pre">shape.\\npreference(high_cardinality_shape,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(encoding_cardinality,E,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,shape),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">8.\\n\\n%</span> <span class="pre">&#64;soft(high_cardinality_size)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">size</span> <span class="pre">when</span> <span class="pre">the</span> <span class="pre">cardinality</span> <span class="pre">is</span> <span class="pre">large</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">or</span> <span class="pre">y.\\npreference(high_cardinality_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,size),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(encoding_cardinality,E,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,(x;y)),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">100.\\n\\n%</span> <span class="pre">&#64;soft(horizontal_scrolling_x)</span> <span class="pre">Avoid</span> <span class="pre">high</span> <span class="pre">cardinality</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">as</span> <span class="pre">it</span> <span class="pre">causes</span> <span class="pre">horizontal</span> <span class="pre">scrolling.\\npreference(horizontal_scrolling_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(encoding_cardinality,E,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">50.\\n\\n%</span> <span class="pre">&#64;soft(horizontal_scrolling_col)</span> <span class="pre">Avoid</span> <span class="pre">high</span> <span class="pre">cardinality</span> <span class="pre">on</span> <span class="pre">column</span> <span class="pre">as</span> <span class="pre">it</span> <span class="pre">causes</span> <span class="pre">horizontal</span> <span class="pre">scrolling.\\npreference(horizontal_scrolling_col,F)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,col),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(facet_cardinality,F,N),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">5.\\n\\n%</span> <span class="pre">&#64;soft(date_scale)</span> <span class="pre">Prefer</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">linear/ordinal</span> <span class="pre">scale</span> <span class="pre">type</span> <span class="pre">with</span> <span class="pre">dates.\\npreference(date_scale,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,datetime),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,scale_type),E,linear),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n\\n%</span> <span class="pre">&#64;soft(number_linear)</span> <span class="pre">Prefer</span> <span class="pre">use</span> <span class="pre">linear</span> <span class="pre">for</span> <span class="pre">numbers</span> <span class="pre">with</span> <span class="pre">high</span> <span class="pre">cardinality.\\npreference(number_linear,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,number),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,unique),F,N),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">20,\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,scale_type),E,linear).\\n\\n%</span> <span class="pre">&#64;soft(value_agg)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">aggregate</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_agg,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,_).\\n\\n%</span> <span class="pre">&#64;soft(summary_facet)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">facet</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks</span> <span class="pre">as</span> <span class="pre">it</span> <span class="pre">makes</span> <span class="pre">it</span> <span class="pre">difficult</span> <span class="pre">to</span> <span class="pre">compare.\\npreference(summary_facet,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,_).\\n\\n%</span> <span class="pre">&#64;soft(c_d_col)</span> <span class="pre">Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">continuous</span> <span class="pre">on</span> <span class="pre">x,</span> <span class="pre">discrete</span> <span class="pre">on</span> <span class="pre">y,</span> <span class="pre">and</span> <span class="pre">column.\\npreference(c_d_col,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,y),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,col).\\n\\n%</span> <span class="pre">&#64;soft(date_not_x)</span> <span class="pre">Prefer</span> <span class="pre">datetime</span> <span class="pre">on</span> <span class="pre">x.\\npreference(date_not_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,datetime),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,channel),E,x).\\n\\n%</span> <span class="pre">&#64;soft(x_row)</span> <span class="pre">Positional</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.\\npreference(x_row,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,row).\\n\\n%</span> <span class="pre">&#64;soft(y_row)</span> <span class="pre">Positional</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.\\npreference(y_row,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,row).\\n\\n%</span> <span class="pre">&#64;soft(x_col)</span> <span class="pre">Positional</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.\\npreference(x_col,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,col).\\n\\n%</span> <span class="pre">&#64;soft(y_col)</span> <span class="pre">Positional</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.\\npreference(y_col,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,col).\\n\\n%</span> <span class="pre">&#64;soft(color_entropy_high)</span> <span class="pre">Entropy,</span> <span class="pre">primary</span> <span class="pre">quantitaty</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.\\npreference(color_entropy_high,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,entropy),F,EN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear),\\n</span>&#160;&#160;&#160; <span class="pre">EN</span> <span class="pre">&gt;</span> <span class="pre">5000.\\n\\n%</span> <span class="pre">&#64;soft(color_entropy_low)</span> <span class="pre">Entropy,</span> <span class="pre">primary</span> <span class="pre">quantitaty</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.\\npreference(color_entropy_low,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,entropy),F,EN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear),\\n</span>&#160;&#160;&#160; <span class="pre">EN</span> <span class="pre">&lt;=</span> <span class="pre">5000.\\n\\n%</span> <span class="pre">&#64;soft(size_entropy_high)</span> <span class="pre">Entropy,</span> <span class="pre">primary</span> <span class="pre">quantitaty</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.\\npreference(size_entropy_high,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,entropy),F,EN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear),\\n</span>&#160;&#160;&#160; <span class="pre">EN</span> <span class="pre">&gt;</span> <span class="pre">5000.\\n\\n%</span> <span class="pre">&#64;soft(size_entropy_low)</span> <span class="pre">Entropy,</span> <span class="pre">primary</span> <span class="pre">quantitaty</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.\\npreference(size_entropy_low,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,entropy),F,EN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear),\\n</span>&#160;&#160;&#160; <span class="pre">EN</span> <span class="pre">&lt;=</span> <span class="pre">5000.\\n\\n%</span> <span class="pre">&#64;soft(linear_scale)</span> <span class="pre">linear</span> <span class="pre">scale.\\npreference(linear_scale,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n\\n%</span> <span class="pre">&#64;soft(log_scale)</span> <span class="pre">log</span> <span class="pre">scale.\\npreference(log_scale,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n\\n%</span> <span class="pre">&#64;soft(ordinal_scale)</span> <span class="pre">ordinal</span> <span class="pre">scale.\\npreference(ordinal_scale,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n\\n%</span> <span class="pre">&#64;soft(categorical_scale)</span> <span class="pre">categorical</span> <span class="pre">scale.\\npreference(categorical_scale,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,categorical).\\n\\n%</span> <span class="pre">&#64;soft(c_c_point)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">continuous</span> <span class="pre">for</span> <span class="pre">point</span> <span class="pre">mark.\\npreference(c_c_point,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_c,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,point).\\n\\n%</span> <span class="pre">&#64;soft(c_c_line)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">continuous</span> <span class="pre">for</span> <span class="pre">line</span> <span class="pre">mark.\\npreference(c_c_line,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_c,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,line).\\n\\n%</span> <span class="pre">&#64;soft(c_c_area)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">continuous</span> <span class="pre">for</span> <span class="pre">area</span> <span class="pre">mark.\\npreference(c_c_area,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_c,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,area).\\n\\n%</span> <span class="pre">&#64;soft(c_c_text)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">continuous</span> <span class="pre">for</span> <span class="pre">text</span> <span class="pre">mark.\\npreference(c_c_text,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_c,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text).\\n\\n%</span> <span class="pre">&#64;soft(c_d_point)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">point</span> <span class="pre">mark.\\npreference(c_d_point,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,point).\\n\\n%</span> <span class="pre">&#64;soft(c_d_bar)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">bar</span> <span class="pre">mark.\\npreference(c_d_bar,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,bar).\\n\\n%</span> <span class="pre">&#64;soft(c_d_line)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">line</span> <span class="pre">mark.\\npreference(c_d_line,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,line).\\n\\n%</span> <span class="pre">&#64;soft(c_d_area)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">area</span> <span class="pre">mark.\\npreference(c_d_area,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,area).\\n\\n%</span> <span class="pre">&#64;soft(c_d_text)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">text</span> <span class="pre">mark.\\npreference(c_d_text,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text).\\n\\n%</span> <span class="pre">&#64;soft(c_d_tick)</span> <span class="pre">Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">tick</span> <span class="pre">mark.\\npreference(c_d_tick,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,tick).\\n\\n%</span> <span class="pre">&#64;soft(d_d_point)</span> <span class="pre">Discrete</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">point</span> <span class="pre">mark.\\npreference(d_d_point,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_d_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,point).\\n\\n%</span> <span class="pre">&#64;soft(d_d_text)</span> <span class="pre">Discrete</span> <span class="pre">by</span> <span class="pre">discretee</span> <span class="pre">for</span> <span class="pre">text</span> <span class="pre">mark.\\npreference(d_d_text,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_d_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text).\\n\\n%</span> <span class="pre">&#64;soft(d_d_rect)</span> <span class="pre">Discrete</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">rect</span> <span class="pre">mark.\\npreference(d_d_rect,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_d_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,rect).\\n\\n%</span> <span class="pre">&#64;soft(linear_x)</span> <span class="pre">Linear</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">x</span> <span class="pre">channel.\\npreference(linear_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n\\n%</span> <span class="pre">&#64;soft(linear_y)</span> <span class="pre">Linear</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">y</span> <span class="pre">channel.\\npreference(linear_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n\\n%</span> <span class="pre">&#64;soft(linear_color)</span> <span class="pre">Linear</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">color</span> <span class="pre">channel.\\npreference(linear_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n\\n%</span> <span class="pre">&#64;soft(linear_size)</span> <span class="pre">Linear</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">size</span> <span class="pre">channel.\\npreference(linear_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n\\n%</span> <span class="pre">&#64;soft(linear_text)</span> <span class="pre">Linear</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">text</span> <span class="pre">channel.\\npreference(linear_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n\\n%</span> <span class="pre">&#64;soft(log_x)</span> <span class="pre">Log</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">x</span> <span class="pre">channel.\\npreference(log_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n\\n%</span> <span class="pre">&#64;soft(log_y)</span> <span class="pre">Log</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">y</span> <span class="pre">channel.\\npreference(log_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n\\n%</span> <span class="pre">&#64;soft(log_color)</span> <span class="pre">Log</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">color</span> <span class="pre">channel.\\npreference(log_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n\\n%</span> <span class="pre">&#64;soft(log_size)</span> <span class="pre">Log</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">size</span> <span class="pre">channel.\\npreference(log_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n\\n%</span> <span class="pre">&#64;soft(log_text)</span> <span class="pre">Log</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">text</span> <span class="pre">channel.\\npreference(log_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n\\n%</span> <span class="pre">&#64;soft(ordinal_x)</span> <span class="pre">Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">x</span> <span class="pre">channel.\\npreference(ordinal_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n\\n%</span> <span class="pre">&#64;soft(ordinal_y)</span> <span class="pre">Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">y</span> <span class="pre">channel.\\npreference(ordinal_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n\\n%</span> <span class="pre">&#64;soft(ordinal_color)</span> <span class="pre">Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">color</span> <span class="pre">channel.\\npreference(ordinal_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n\\n%</span> <span class="pre">&#64;soft(ordinal_size)</span> <span class="pre">Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">size</span> <span class="pre">channel.\\npreference(ordinal_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n\\n%</span> <span class="pre">&#64;soft(ordinal_shape)</span> <span class="pre">Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">shape</span> <span class="pre">channel.\\npreference(ordinal_shape,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,shape),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n\\n%</span> <span class="pre">&#64;soft(ordinal_text)</span> <span class="pre">Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">text</span> <span class="pre">channel.\\npreference(ordinal_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n\\n%</span> <span class="pre">&#64;soft(ordinal_detail)</span> <span class="pre">Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">detail</span> <span class="pre">channel.\\npreference(ordinal_detail,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,detail),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n\\n%</span> <span class="pre">&#64;soft(categorical_color)</span> <span class="pre">Categorical</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">color</span> <span class="pre">channel.\\npreference(categorical_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,categorical).\\n\\n%</span> <span class="pre">&#64;soft(aggregate_count)</span> <span class="pre">Count</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.\\npreference(aggregate_count,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,count).\\n\\n%</span> <span class="pre">&#64;soft(aggregate_mean)</span> <span class="pre">Mean</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.\\npreference(aggregate_mean,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,mean).\\n\\n%</span> <span class="pre">&#64;soft(aggregate_median)</span> <span class="pre">Median</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.\\npreference(aggregate_median,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,median).\\n\\n%</span> <span class="pre">&#64;soft(aggregate_min)</span> <span class="pre">Min</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.\\npreference(aggregate_min,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,min).\\n\\n%</span> <span class="pre">&#64;soft(aggregate_max)</span> <span class="pre">Max</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.\\npreference(aggregate_max,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,max).\\n\\n%</span> <span class="pre">&#64;soft(aggregate_stdev)</span> <span class="pre">Stdev</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.\\npreference(aggregate_stdev,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,stdev).\\n\\n%</span> <span class="pre">&#64;soft(aggregate_sum)</span> <span class="pre">Sum</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.\\npreference(aggregate_sum,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,sum).\\n\\n%</span> <span class="pre">&#64;soft(stack_zero)</span> <span class="pre">Zero</span> <span class="pre">base</span> <span class="pre">for</span> <span class="pre">stack</span> <span class="pre">op.\\npreference(stack_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,zero).\\n\\n%</span> <span class="pre">&#64;soft(stack_center)</span> <span class="pre">Center</span> <span class="pre">groupbys</span> <span class="pre">as</span> <span class="pre">stack</span> <span class="pre">op.\\npreference(stack_center,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,center).\\n\\n%</span> <span class="pre">&#64;soft(stack_normalize)</span> <span class="pre">Normalize</span> <span class="pre">between</span> <span class="pre">groupbys</span> <span class="pre">as</span> <span class="pre">stack</span> <span class="pre">op.\\npreference(stack_normalize,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,normalize).\\n\\n%</span> <span class="pre">&#64;soft(value_point)</span> <span class="pre">Point</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_point,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,point).\\n\\n%</span> <span class="pre">&#64;soft(value_bar)</span> <span class="pre">Bar</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_bar,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,bar).\\n\\n%</span> <span class="pre">&#64;soft(value_line)</span> <span class="pre">Line</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_line,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,line).\\n\\n%</span> <span class="pre">&#64;soft(value_area)</span> <span class="pre">Area</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_area,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,area).\\n\\n%</span> <span class="pre">&#64;soft(value_text)</span> <span class="pre">Text</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_text,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text).\\n\\n%</span> <span class="pre">&#64;soft(value_tick)</span> <span class="pre">Tick</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_tick,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,tick).\\n\\n%</span> <span class="pre">&#64;soft(value_rect)</span> <span class="pre">Rect</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_rect,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,rect).\\n\\n%</span> <span class="pre">&#64;soft(summary_point)</span> <span class="pre">Point</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_point,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,point).\\n\\n%</span> <span class="pre">&#64;soft(summary_bar)</span> <span class="pre">Bar</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_bar,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,bar).\\n\\n%</span> <span class="pre">&#64;soft(summary_line)</span> <span class="pre">Line</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_line,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,line).\\n\\n%</span> <span class="pre">&#64;soft(summary_area)</span> <span class="pre">Area</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_area,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,area).\\n\\n%</span> <span class="pre">&#64;soft(summary_text)</span> <span class="pre">Text</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_text,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text).\\n\\n%</span> <span class="pre">&#64;soft(summary_tick)</span> <span class="pre">Tick</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_tick,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,tick).\\n\\n%</span> <span class="pre">&#64;soft(summary_rect)</span> <span class="pre">Rect</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_rect,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,rect).\\n\\n%</span> <span class="pre">&#64;soft(value_continuous_x)</span> <span class="pre">Continuous</span> <span class="pre">x</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_continuous_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_continuous_y)</span> <span class="pre">Continuous</span> <span class="pre">y</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_continuous_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_continuous_color)</span> <span class="pre">Continuous</span> <span class="pre">color</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_continuous_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_continuous_size)</span> <span class="pre">Continuous</span> <span class="pre">size</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_continuous_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_continuous_text)</span> <span class="pre">Continuous</span> <span class="pre">text</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_continuous_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_discrete_x)</span> <span class="pre">Discrete</span> <span class="pre">x</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_discrete_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_discrete_y)</span> <span class="pre">Discrete</span> <span class="pre">y</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_discrete_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_discrete_color)</span> <span class="pre">Discrete</span> <span class="pre">color</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_discrete_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_discrete_size)</span> <span class="pre">Discrete</span> <span class="pre">size</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_discrete_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_discrete_shape)</span> <span class="pre">Discrete</span> <span class="pre">shape</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_discrete_shape,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,shape),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_discrete_text)</span> <span class="pre">Discrete</span> <span class="pre">text</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_discrete_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(value_discrete_detail)</span> <span class="pre">Discrete</span> <span class="pre">detail</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.\\npreference(value_discrete_detail,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,detail),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_continuous_x)</span> <span class="pre">Continuous</span> <span class="pre">x</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_continuous_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_continuous_y)</span> <span class="pre">Continuous</span> <span class="pre">y</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_continuous_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_continuous_color)</span> <span class="pre">Continuous</span> <span class="pre">color</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_continuous_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_continuous_size)</span> <span class="pre">Continuous</span> <span class="pre">size</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_continuous_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_continuous_text)</span> <span class="pre">Continuous</span> <span class="pre">text</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_continuous_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_discrete_x)</span> <span class="pre">Discrete</span> <span class="pre">x</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_discrete_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_discrete_y)</span> <span class="pre">Discrete</span> <span class="pre">y</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_discrete_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_discrete_color)</span> <span class="pre">Discrete</span> <span class="pre">color</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_discrete_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_discrete_size)</span> <span class="pre">Discrete</span> <span class="pre">size</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_discrete_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_discrete_shape)</span> <span class="pre">Discrete</span> <span class="pre">shape</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_discrete_shape,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,shape),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_discrete_text)</span> <span class="pre">Discrete</span> <span class="pre">text</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_discrete_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n\\n%</span> <span class="pre">&#64;soft(summary_discrete_detail)</span> <span class="pre">Discrete</span> <span class="pre">detail</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.\\npreference(summary_discrete_detail,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,detail),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n&quot;,</span> <span class="pre">blocks={'__preamble__':</span> <span class="pre">'%</span> <span class="pre">======</span> <span class="pre">Preferences</span> <span class="pre">======\\n',</span> <span class="pre">'aggregate':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">raw</span> <span class="pre">(no</span> <span class="pre">aggregate).',</span> <span class="pre">program='preference(aggregate,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,_).\\n'),</span> <span class="pre">'bin':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">to</span> <span class="pre">not</span> <span class="pre">bin.',</span> <span class="pre">program='preference(bin,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_).\\n'),</span> <span class="pre">'bin_high':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">binning</span> <span class="pre">with</span> <span class="pre">at</span> <span class="pre">most</span> <span class="pre">12</span> <span class="pre">buckets.',</span> <span class="pre">program='preference(bin_high,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,B),</span> <span class="pre">B</span> <span class="pre">&gt;</span> <span class="pre">12.\\n'),</span> <span class="pre">'bin_low':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">binning</span> <span class="pre">with</span> <span class="pre">more</span> <span class="pre">than</span> <span class="pre">7</span> <span class="pre">buckets.',</span> <span class="pre">program='preference(bin_low,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,B),</span> <span class="pre">B</span> <span class="pre">&lt;=</span> <span class="pre">7.\\n'),</span> <span class="pre">'encoding':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">fewer</span> <span class="pre">encodings.',</span> <span class="pre">program='preference(encoding,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,_,E).\\n'),</span> <span class="pre">'encoding_field':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">fewer</span> <span class="pre">encodings</span> <span class="pre">with</span> <span class="pre">fields</span> <span class="pre">(count</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">field).',</span> <span class="pre">program='preference(encoding_field,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,_).\\n'),</span> <span class="pre">'same_field':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">field</span> <span class="pre">twice</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">mark.',</span> <span class="pre">program='preference(same_field,F)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(field,_,F),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">entity(encoding,M,E):</span> <span class="pre">attribute((encoding,field),E,F)</span> <span class="pre">}</span> <span class="pre">=</span> <span class="pre">2.\\n'),</span> <span class="pre">'same_field_grt3':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">field</span> <span class="pre">three</span> <span class="pre">or</span> <span class="pre">more</span> <span class="pre">times</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">mark.',</span> <span class="pre">program='preference(same_field_grt3,F)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(field,_,F),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">entity(encoding,M,E):</span> <span class="pre">attribute((encoding,field),E,F)</span> <span class="pre">}</span> <span class="pre">&gt;=</span> <span class="pre">3.\\n'),</span> <span class="pre">'count_grt1':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">count</span> <span class="pre">more</span> <span class="pre">than</span> <span class="pre">once.',</span> <span class="pre">program='preference(count_grt1,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">entity(encoding,M,E):</span> <span class="pre">attribute((encoding,aggregate),E,count)</span> <span class="pre">}</span> <span class="pre">&gt;</span> <span class="pre">1.\\n'),</span> <span class="pre">'number_categorical':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Should</span> <span class="pre">not</span> <span class="pre">use</span> <span class="pre">categorical</span> <span class="pre">scale</span> <span class="pre">for</span> <span class="pre">number</span> <span class="pre">field.',</span> <span class="pre">program='preference(number_categorical,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,number),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,categorical).\\n'),</span> <span class="pre">'bin_low_unique':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Binned</span> <span class="pre">field</span> <span class="pre">should</span> <span class="pre">not</span> <span class="pre">have</span> <span class="pre">too</span> <span class="pre">less</span> <span class="pre">unique</span> <span class="pre">values.',</span> <span class="pre">program='preference(bin_low_unique,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,(number;datetime)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,unique),F,U),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">U</span> <span class="pre">&lt;</span> <span class="pre">15.\\n'),</span> <span class="pre">'bin_not_linear':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">linear</span> <span class="pre">scale</span> <span class="pre">for</span> <span class="pre">bin.',</span> <span class="pre">program='preference(bin_not_linear,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,scale_type),E,linear).\\n'),</span> <span class="pre">'only_discrete':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Only</span> <span class="pre">discrete</span> <span class="pre">encoding</span> <span class="pre">channels</span> <span class="pre">are</span> <span class="pre">used</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">mark.',</span> <span class="pre">program='preference(only_discrete,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_cont,M,_).\\n'),</span> <span class="pre">'multi_non_pos':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">multiple</span> <span class="pre">non-positional</span> <span class="pre">encoding</span> <span class="pre">channels.',</span> <span class="pre">program='preference(multi_non_pos,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,_,M),\\n</span>&#160;&#160;&#160; <span class="pre">{</span> <span class="pre">attribute((mark,channel),M,C):</span> <span class="pre">domain(non_positional,C)</span> <span class="pre">}</span> <span class="pre">&gt;</span> <span class="pre">1.\\n'),</span> <span class="pre">'non_pos_used_before_pos':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">non-positional</span> <span class="pre">channels</span> <span class="pre">until</span> <span class="pre">all</span> <span class="pre">positional</span> <span class="pre">channels</span> <span class="pre">are</span> <span class="pre">used.',</span> <span class="pre">program='preference(non_pos_used_before_pos,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,C),\\n</span>&#160;&#160;&#160; <span class="pre">domain(non_positional,C),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,(x;y)).\\n'),</span> <span class="pre">'aggregate_group_by_raw':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Aggregate</span> <span class="pre">plots</span> <span class="pre">should</span> <span class="pre">not</span> <span class="pre">use</span> <span class="pre">raw</span> <span class="pre">continuous</span> <span class="pre">as</span> <span class="pre">group</span> <span class="pre">by.',</span> <span class="pre">program='preference(aggregate_group_by_raw,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,EA),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),EA,_),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,_).\\n'),</span> <span class="pre">'aggregate_no_discrete':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Aggregate</span> <span class="pre">should</span> <span class="pre">also</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">discrete</span> <span class="pre">encoding</span> <span class="pre">to</span> <span class="pre">group</span> <span class="pre">by.',</span> <span class="pre">program='preference(aggregate_no_discrete,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,EA),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),EA,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,_).\\n'),</span> <span class="pre">'x_y_raw':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">plot</span> <span class="pre">with</span> <span class="pre">both</span> <span class="pre">x</span> <span class="pre">and</span> <span class="pre">y</span> <span class="pre">discrete</span> <span class="pre">and</span> <span class="pre">no</span> <span class="pre">aggregate</span> <span class="pre">as</span> <span class="pre">it</span> <span class="pre">leads</span> <span class="pre">to</span> <span class="pre">occlusion.',</span> <span class="pre">program='preference(x_y_raw,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,y),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,aggregate),E,_).\\n'),</span> <span class="pre">'continuous_not_zero':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description=&quot;Prefer</span> <span class="pre">to</span> <span class="pre">include</span> <span class="pre">zero</span> <span class="pre">for</span> <span class="pre">continuous</span> <span class="pre">(binned</span> <span class="pre">doesn't</span> <span class="pre">need</span> <span class="pre">zero).&quot;,</span> <span class="pre">program='preference(continuous_not_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_scale,M,E,S),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,zero),S,true).\\n'),</span> <span class="pre">'size_not_zero':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">zero</span> <span class="pre">size</span> <span class="pre">(even</span> <span class="pre">when</span> <span class="pre">binned).',</span> <span class="pre">program='preference(size_not_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_scale,M,E,S),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,zero),S,true).\\n'),</span> <span class="pre">'continuous_pos_not_zero':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">zero</span> <span class="pre">continuous</span> <span class="pre">positional.',</span> <span class="pre">program='preference(continuous_pos_not_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,(x;y)),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_scale,M,E,S),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((scale,zero),S,true).\\n'),</span> <span class="pre">'skew_zero':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">zero</span> <span class="pre">when</span> <span class="pre">the</span> <span class="pre">difference</span> <span class="pre">between</span> <span class="pre">min</span> <span class="pre">and</span> <span class="pre">max</span> <span class="pre">is</span> <span class="pre">smaller</span> <span class="pre">than</span> <span class="pre">distance</span> <span class="pre">to</span> <span class="pre">0.',</span> <span class="pre">program='preference(skew_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,min),F,MIN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,max),F,MAX),\\n</span>&#160;&#160;&#160; <span class="pre">EXT</span> <span class="pre">=</span> <span class="pre">MAX</span> <span class="pre">-</span> <span class="pre">MIN,\\n</span>&#160;&#160;&#160; <span class="pre">|MAX|</span> <span class="pre">&gt;</span> <span class="pre">EXT,\\n</span>&#160;&#160;&#160; <span class="pre">|MIN|</span> <span class="pre">&gt;</span> <span class="pre">EXT,\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_scale,M,E,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,zero),S,true).\\n'),</span> <span class="pre">'cross_zero':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">include</span> <span class="pre">zero</span> <span class="pre">as</span> <span class="pre">baseline</span> <span class="pre">when</span> <span class="pre">the</span> <span class="pre">range</span> <span class="pre">of</span> <span class="pre">data</span> <span class="pre">crosses</span> <span class="pre">zero.',</span> <span class="pre">program='preference(cross_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,min),F,MIN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,max),F,MAX),\\n</span>&#160;&#160;&#160; <span class="pre">MAX</span> <span class="pre">&gt;</span> <span class="pre">0,\\n</span>&#160;&#160;&#160; <span class="pre">MIN</span> <span class="pre">&lt;</span> <span class="pre">0,\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_scale,M,E,S),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((scale,zero),S,true).\\n'),</span> <span class="pre">'only_y':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">only</span> <span class="pre">x</span> <span class="pre">instead</span> <span class="pre">of</span> <span class="pre">only</span> <span class="pre">y.',</span> <span class="pre">program='preference(only_y,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((mark,channel),M,x).\\n'),</span> <span class="pre">'binned_orientation_not_x':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">binned</span> <span class="pre">quantative</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">axis.',</span> <span class="pre">program='preference(binned_orientation_not_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,(number;datetime)),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,channel),E,x).\\n'),</span> <span class="pre">'high_cardinality_ordinal':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">ordinal</span> <span class="pre">for</span> <span class="pre">fields</span> <span class="pre">with</span> <span class="pre">high</span> <span class="pre">cardinality.',</span> <span class="pre">program='preference(high_cardinality_ordinal,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(encoding_cardinality,E,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">30.\\n'),</span> <span class="pre">'high_cardinality_categorical_grt10':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">categorical</span> <span class="pre">(color)</span> <span class="pre">for</span> <span class="pre">fields</span> <span class="pre">with</span> <span class="pre">high</span> <span class="pre">cardinality.',</span> <span class="pre">program='preference(high_cardinality_categorical_grt10,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(encoding_cardinality,E,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,categorical),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">10.\\n'),</span> <span class="pre">'high_cardinality_shape':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">high</span> <span class="pre">cardinality</span> <span class="pre">ordinal</span> <span class="pre">for</span> <span class="pre">shape.',</span> <span class="pre">program='preference(high_cardinality_shape,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(encoding_cardinality,E,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,shape),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">8.\\n'),</span> <span class="pre">'high_cardinality_size':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">size</span> <span class="pre">when</span> <span class="pre">the</span> <span class="pre">cardinality</span> <span class="pre">is</span> <span class="pre">large</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">or</span> <span class="pre">y.',</span> <span class="pre">program='preference(high_cardinality_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,size),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(encoding_cardinality,E,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,(x;y)),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">100.\\n'),</span> <span class="pre">'horizontal_scrolling_x':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Avoid</span> <span class="pre">high</span> <span class="pre">cardinality</span> <span class="pre">on</span> <span class="pre">x</span> <span class="pre">as</span> <span class="pre">it</span> <span class="pre">causes</span> <span class="pre">horizontal</span> <span class="pre">scrolling.',</span> <span class="pre">program='preference(horizontal_scrolling_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(encoding_cardinality,E,N),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">50.\\n'),</span> <span class="pre">'horizontal_scrolling_col':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Avoid</span> <span class="pre">high</span> <span class="pre">cardinality</span> <span class="pre">on</span> <span class="pre">column</span> <span class="pre">as</span> <span class="pre">it</span> <span class="pre">causes</span> <span class="pre">horizontal</span> <span class="pre">scrolling.',</span> <span class="pre">program='preference(horizontal_scrolling_col,F)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,col),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(facet_cardinality,F,N),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">5.\\n'),</span> <span class="pre">'date_scale':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">linear/ordinal</span> <span class="pre">scale</span> <span class="pre">type</span> <span class="pre">with</span> <span class="pre">dates.',</span> <span class="pre">program='preference(date_scale,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,datetime),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,scale_type),E,linear),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n'),</span> <span class="pre">'number_linear':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">use</span> <span class="pre">linear</span> <span class="pre">for</span> <span class="pre">numbers</span> <span class="pre">with</span> <span class="pre">high</span> <span class="pre">cardinality.',</span> <span class="pre">program='preference(number_linear,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,number),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,unique),F,N),\\n</span>&#160;&#160;&#160; <span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">20,\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,binning),E,_),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,scale_type),E,linear).\\n'),</span> <span class="pre">'value_agg':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">aggregate</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_agg,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">entity(encoding,M,E),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,_).\\n'),</span> <span class="pre">'summary_facet':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">facet</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks</span> <span class="pre">as</span> <span class="pre">it</span> <span class="pre">makes</span> <span class="pre">it</span> <span class="pre">difficult</span> <span class="pre">to</span> <span class="pre">compare.',</span> <span class="pre">program='preference(summary_facet,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,_).\\n'),</span> <span class="pre">'c_d_col':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">not</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">continuous</span> <span class="pre">on</span> <span class="pre">x,</span> <span class="pre">discrete</span> <span class="pre">on</span> <span class="pre">y,</span> <span class="pre">and</span> <span class="pre">column.',</span> <span class="pre">program='preference(c_d_col,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_channel_discrete_or_binned,M,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_channel_discrete_or_binned,M,y),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,col).\\n'),</span> <span class="pre">'date_not_x':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Prefer</span> <span class="pre">datetime</span> <span class="pre">on</span> <span class="pre">x.',</span> <span class="pre">program='preference(date_not_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,type),F,datetime),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute((encoding,channel),E,x).\\n'),</span> <span class="pre">'x_row':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Positional</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.',</span> <span class="pre">program='preference(x_row,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,row).\\n'),</span> <span class="pre">'y_row':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Positional</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.',</span> <span class="pre">program='preference(y_row,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,row).\\n'),</span> <span class="pre">'x_col':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Positional</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.',</span> <span class="pre">program='preference(x_col,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,x),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,col).\\n'),</span> <span class="pre">'y_col':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Positional</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.',</span> <span class="pre">program='preference(y_col,V)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">entity(mark,V,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,channel),M,y),\\n</span>&#160;&#160;&#160; <span class="pre">entity(facet,V,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((facet,channel),F,col).\\n'),</span> <span class="pre">'color_entropy_high':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Entropy,</span> <span class="pre">primary</span> <span class="pre">quantitaty</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.',</span> <span class="pre">program='preference(color_entropy_high,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,entropy),F,EN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear),\\n</span>&#160;&#160;&#160; <span class="pre">EN</span> <span class="pre">&gt;</span> <span class="pre">5000.\\n'),</span> <span class="pre">'color_entropy_low':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Entropy,</span> <span class="pre">primary</span> <span class="pre">quantitaty</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.',</span> <span class="pre">program='preference(color_entropy_low,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,entropy),F,EN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear),\\n</span>&#160;&#160;&#160; <span class="pre">EN</span> <span class="pre">&lt;=</span> <span class="pre">5000.\\n'),</span> <span class="pre">'size_entropy_high':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Entropy,</span> <span class="pre">primary</span> <span class="pre">quantitaty</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.',</span> <span class="pre">program='preference(size_entropy_high,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,entropy),F,EN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear),\\n</span>&#160;&#160;&#160; <span class="pre">EN</span> <span class="pre">&gt;</span> <span class="pre">5000.\\n'),</span> <span class="pre">'size_entropy_low':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Entropy,</span> <span class="pre">primary</span> <span class="pre">quantitaty</span> <span class="pre">interactions</span> <span class="pre">as</span> <span class="pre">suggested</span> <span class="pre">by</span> <span class="pre">Kim</span> <span class="pre">et</span> <span class="pre">al.',</span> <span class="pre">program='preference(size_entropy_low,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((field,entropy),F,EN),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,field),E,F),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear),\\n</span>&#160;&#160;&#160; <span class="pre">EN</span> <span class="pre">&lt;=</span> <span class="pre">5000.\\n'),</span> <span class="pre">'linear_scale':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='linear</span> <span class="pre">scale.',</span> <span class="pre">program='preference(linear_scale,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n'),</span> <span class="pre">'log_scale':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='log</span> <span class="pre">scale.',</span> <span class="pre">program='preference(log_scale,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n'),</span> <span class="pre">'ordinal_scale':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='ordinal</span> <span class="pre">scale.',</span> <span class="pre">program='preference(ordinal_scale,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n'),</span> <span class="pre">'categorical_scale':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='categorical</span> <span class="pre">scale.',</span> <span class="pre">program='preference(categorical_scale,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,categorical).\\n'),</span> <span class="pre">'c_c_point':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">continuous</span> <span class="pre">for</span> <span class="pre">point</span> <span class="pre">mark.',</span> <span class="pre">program='preference(c_c_point,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_c,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,point).\\n'),</span> <span class="pre">'c_c_line':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">continuous</span> <span class="pre">for</span> <span class="pre">line</span> <span class="pre">mark.',</span> <span class="pre">program='preference(c_c_line,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_c,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,line).\\n'),</span> <span class="pre">'c_c_area':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">continuous</span> <span class="pre">for</span> <span class="pre">area</span> <span class="pre">mark.',</span> <span class="pre">program='preference(c_c_area,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_c,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,area).\\n'),</span> <span class="pre">'c_c_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">continuous</span> <span class="pre">for</span> <span class="pre">text</span> <span class="pre">mark.',</span> <span class="pre">program='preference(c_c_text,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_c,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text).\\n'),</span> <span class="pre">'c_d_point':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">point</span> <span class="pre">mark.',</span> <span class="pre">program='preference(c_d_point,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,point).\\n'),</span> <span class="pre">'c_d_bar':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">bar</span> <span class="pre">mark.',</span> <span class="pre">program='preference(c_d_bar,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,bar).\\n'),</span> <span class="pre">'c_d_line':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">line</span> <span class="pre">mark.',</span> <span class="pre">program='preference(c_d_line,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,line).\\n'),</span> <span class="pre">'c_d_area':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">area</span> <span class="pre">mark.',</span> <span class="pre">program='preference(c_d_area,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,area).\\n'),</span> <span class="pre">'c_d_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">text</span> <span class="pre">mark.',</span> <span class="pre">program='preference(c_d_text,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text).\\n'),</span> <span class="pre">'c_d_tick':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">tick</span> <span class="pre">mark.',</span> <span class="pre">program='preference(c_d_tick,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_c_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,tick).\\n'),</span> <span class="pre">'d_d_point':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">point</span> <span class="pre">mark.',</span> <span class="pre">program='preference(d_d_point,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_d_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,point).\\n'),</span> <span class="pre">'d_d_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">by</span> <span class="pre">discretee</span> <span class="pre">for</span> <span class="pre">text</span> <span class="pre">mark.',</span> <span class="pre">program='preference(d_d_text,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_d_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text).\\n'),</span> <span class="pre">'d_d_rect':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">by</span> <span class="pre">discrete</span> <span class="pre">for</span> <span class="pre">rect</span> <span class="pre">mark.',</span> <span class="pre">program='preference(d_d_rect,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(is_d_d,M),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,rect).\\n'),</span> <span class="pre">'linear_x':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Linear</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">x</span> <span class="pre">channel.',</span> <span class="pre">program='preference(linear_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n'),</span> <span class="pre">'linear_y':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Linear</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">y</span> <span class="pre">channel.',</span> <span class="pre">program='preference(linear_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n'),</span> <span class="pre">'linear_color':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Linear</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">color</span> <span class="pre">channel.',</span> <span class="pre">program='preference(linear_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n'),</span> <span class="pre">'linear_size':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Linear</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">size</span> <span class="pre">channel.',</span> <span class="pre">program='preference(linear_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n'),</span> <span class="pre">'linear_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Linear</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">text</span> <span class="pre">channel.',</span> <span class="pre">program='preference(linear_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,linear).\\n'),</span> <span class="pre">'log_x':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Log</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">x</span> <span class="pre">channel.',</span> <span class="pre">program='preference(log_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n'),</span> <span class="pre">'log_y':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Log</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">y</span> <span class="pre">channel.',</span> <span class="pre">program='preference(log_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n'),</span> <span class="pre">'log_color':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Log</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">color</span> <span class="pre">channel.',</span> <span class="pre">program='preference(log_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n'),</span> <span class="pre">'log_size':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Log</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">size</span> <span class="pre">channel.',</span> <span class="pre">program='preference(log_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n'),</span> <span class="pre">'log_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Log</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">text</span> <span class="pre">channel.',</span> <span class="pre">program='preference(log_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,log).\\n'),</span> <span class="pre">'ordinal_x':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">x</span> <span class="pre">channel.',</span> <span class="pre">program='preference(ordinal_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n'),</span> <span class="pre">'ordinal_y':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">y</span> <span class="pre">channel.',</span> <span class="pre">program='preference(ordinal_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n'),</span> <span class="pre">'ordinal_color':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">color</span> <span class="pre">channel.',</span> <span class="pre">program='preference(ordinal_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n'),</span> <span class="pre">'ordinal_size':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">size</span> <span class="pre">channel.',</span> <span class="pre">program='preference(ordinal_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n'),</span> <span class="pre">'ordinal_shape':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">shape</span> <span class="pre">channel.',</span> <span class="pre">program='preference(ordinal_shape,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,shape),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n'),</span> <span class="pre">'ordinal_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">text</span> <span class="pre">channel.',</span> <span class="pre">program='preference(ordinal_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n'),</span> <span class="pre">'ordinal_detail':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Ordinal</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">detail</span> <span class="pre">channel.',</span> <span class="pre">program='preference(ordinal_detail,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,detail),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,ordinal).\\n'),</span> <span class="pre">'categorical_color':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Categorical</span> <span class="pre">scale</span> <span class="pre">with</span> <span class="pre">color</span> <span class="pre">channel.',</span> <span class="pre">program='preference(categorical_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,scale_type),E,categorical).\\n'),</span> <span class="pre">'aggregate_count':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Count</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.',</span> <span class="pre">program='preference(aggregate_count,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,count).\\n'),</span> <span class="pre">'aggregate_mean':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Mean</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.',</span> <span class="pre">program='preference(aggregate_mean,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,mean).\\n'),</span> <span class="pre">'aggregate_median':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Median</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.',</span> <span class="pre">program='preference(aggregate_median,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,median).\\n'),</span> <span class="pre">'aggregate_min':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Min</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.',</span> <span class="pre">program='preference(aggregate_min,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,min).\\n'),</span> <span class="pre">'aggregate_max':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Max</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.',</span> <span class="pre">program='preference(aggregate_max,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,max).\\n'),</span> <span class="pre">'aggregate_stdev':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Stdev</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.',</span> <span class="pre">program='preference(aggregate_stdev,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,stdev).\\n'),</span> <span class="pre">'aggregate_sum':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Sum</span> <span class="pre">as</span> <span class="pre">aggregate</span> <span class="pre">op.',</span> <span class="pre">program='preference(aggregate_sum,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,aggregate),E,sum).\\n'),</span> <span class="pre">'stack_zero':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Zero</span> <span class="pre">base</span> <span class="pre">for</span> <span class="pre">stack</span> <span class="pre">op.',</span> <span class="pre">program='preference(stack_zero,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,zero).\\n'),</span> <span class="pre">'stack_center':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Center</span> <span class="pre">groupbys</span> <span class="pre">as</span> <span class="pre">stack</span> <span class="pre">op.',</span> <span class="pre">program='preference(stack_center,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,center).\\n'),</span> <span class="pre">'stack_normalize':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Normalize</span> <span class="pre">between</span> <span class="pre">groupbys</span> <span class="pre">as</span> <span class="pre">stack</span> <span class="pre">op.',</span> <span class="pre">program='preference(stack_normalize,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,stack),E,normalize).\\n'),</span> <span class="pre">'value_point':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Point</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_point,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,point).\\n'),</span> <span class="pre">'value_bar':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Bar</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_bar,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,bar).\\n'),</span> <span class="pre">'value_line':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Line</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_line,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,line).\\n'),</span> <span class="pre">'value_area':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Area</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_area,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,area).\\n'),</span> <span class="pre">'value_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Text</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_text,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text).\\n'),</span> <span class="pre">'value_tick':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Tick</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_tick,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,tick).\\n'),</span> <span class="pre">'value_rect':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Rect</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_rect,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,rect).\\n'),</span> <span class="pre">'summary_point':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Point</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_point,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,point).\\n'),</span> <span class="pre">'summary_bar':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Bar</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_bar,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,bar).\\n'),</span> <span class="pre">'summary_line':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Line</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_line,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,line).\\n'),</span> <span class="pre">'summary_area':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Area</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_area,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,area).\\n'),</span> <span class="pre">'summary_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Text</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_text,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,text).\\n'),</span> <span class="pre">'summary_tick':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Tick</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_tick,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,tick).\\n'),</span> <span class="pre">'summary_rect':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Rect</span> <span class="pre">mark</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_rect,M)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((mark,type),M,rect).\\n'),</span> <span class="pre">'value_continuous_x':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">x</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_continuous_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_continuous_y':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">y</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_continuous_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_continuous_color':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">color</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_continuous_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_continuous_size':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">size</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_continuous_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_continuous_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">text</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_continuous_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_discrete_x':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">x</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_discrete_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_discrete_y':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">y</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_discrete_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_discrete_color':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">color</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_discrete_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_discrete_size':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">size</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_discrete_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_discrete_shape':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">shape</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_discrete_shape,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,shape),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_discrete_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">text</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_discrete_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'value_discrete_detail':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">detail</span> <span class="pre">for</span> <span class="pre">value</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(value_discrete_detail,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,value),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,detail),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_continuous_x':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">x</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_continuous_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_continuous_y':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">y</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_continuous_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_continuous_color':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">color</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_continuous_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_continuous_size':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">size</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_continuous_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_continuous_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Continuous</span> <span class="pre">text</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_continuous_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">not</span> <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_discrete_x':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">x</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_discrete_x,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,x),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_discrete_y':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">y</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_discrete_y,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,y),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_discrete_color':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">color</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_discrete_color,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,color),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_discrete_size':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">size</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_discrete_size,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,size),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_discrete_shape':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">shape</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_discrete_shape,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,shape),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_discrete_text':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">text</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_discrete_text,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,text),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n'),</span> <span class="pre">'summary_discrete_detail':</span> <span class="pre">Block(block_type='soft',</span> <span class="pre">description='Discrete</span> <span class="pre">detail</span> <span class="pre">for</span> <span class="pre">summary</span> <span class="pre">tasks.',</span> <span class="pre">program='preference(summary_discrete_detail,E)</span> <span class="pre">:-\\n</span>&#160;&#160;&#160; <span class="pre">attribute(task,root,summary),\\n</span>&#160;&#160;&#160; <span class="pre">attribute((encoding,channel),E,detail),\\n</span>&#160;&#160;&#160; <span class="pre">attribute(mark_encoding_discrete_or_binned,_,E).\\n')})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Program(program='%</span> <span class="pre">Minimize</span> <span class="pre">the</span> <span class="pre">feature</span> <span class="pre">weight\\n\\n#minimize</span> <span class="pre">{</span> <span class="pre">W,F,Q:</span> <span class="pre">preference_weight(F,W),</span> <span class="pre">preference(F,Q)</span> <span class="pre">}.',</span> <span class="pre">blocks={'__preamble__':</span> <span class="pre">'%</span> <span class="pre">Minimize</span> <span class="pre">the</span> <span class="pre">feature</span> <span class="pre">weight\\n#minimize</span> <span class="pre">{</span> <span class="pre">W,F,Q:</span> <span class="pre">preference_weight(F,W),</span> <span class="pre">preference(F,Q)</span> <span class="pre">}.'})</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Weights(assign_program='preference_weight(aggregate,aggregate_weight).\\npreference_weight(bin,bin_weight).\\npreference_weight(bin_high,bin_high_weight).\\npreference_weight(bin_low,bin_low_weight).\\npreference_weight(encoding,encoding_weight).\\npreference_weight(encoding_field,encoding_field_weight).\\npreference_weight(same_field,same_field_weight).\\npreference_weight(same_field_grt3,same_field_grt3_weight).\\npreference_weight(count_grt1,count_grt1_weight).\\npreference_weight(number_categorical,number_categorical_weight).\\npreference_weight(bin_low_unique,bin_low_unique_weight).\\npreference_weight(bin_not_linear,bin_not_linear_weight).\\npreference_weight(only_discrete,only_discrete_weight).\\npreference_weight(multi_non_pos,multi_non_pos_weight).\\npreference_weight(non_pos_used_before_pos,non_pos_used_before_pos_weight).\\npreference_weight(aggregate_group_by_raw,aggregate_group_by_raw_weight).\\npreference_weight(aggregate_no_discrete,aggregate_no_discrete_weight).\\npreference_weight(x_y_raw,x_y_raw_weight).\\npreference_weight(continuous_not_zero,continuous_not_zero_weight).\\npreference_weight(size_not_zero,size_not_zero_weight).\\npreference_weight(continuous_pos_not_zero,continuous_pos_not_zero_weight).\\npreference_weight(skew_zero,skew_zero_weight).\\npreference_weight(cross_zero,cross_zero_weight).\\npreference_weight(only_y,only_y_weight).\\npreference_weight(binned_orientation_not_x,binned_orientation_not_x_weight).\\npreference_weight(high_cardinality_ordinal,high_cardinality_ordinal_weight).\\npreference_weight(high_cardinality_categorical_grt10,high_cardinality_categorical_grt10_weight).\\npreference_weight(high_cardinality_shape,high_cardinality_shape_weight).\\npreference_weight(high_cardinality_size,high_cardinality_size_weight).\\npreference_weight(horizontal_scrolling_x,horizontal_scrolling_x_weight).\\npreference_weight(horizontal_scrolling_col,horizontal_scrolling_col_weight).\\npreference_weight(date_scale,date_scale_weight).\\npreference_weight(number_linear,number_linear_weight).\\npreference_weight(value_agg,value_agg_weight).\\npreference_weight(summary_facet,summary_facet_weight).\\npreference_weight(c_d_col,c_d_col_weight).\\npreference_weight(date_not_x,date_not_x_weight).\\npreference_weight(x_row,x_row_weight).\\npreference_weight(y_row,y_row_weight).\\npreference_weight(x_col,x_col_weight).\\npreference_weight(y_col,y_col_weight).\\npreference_weight(color_entropy_high,color_entropy_high_weight).\\npreference_weight(color_entropy_low,color_entropy_low_weight).\\npreference_weight(size_entropy_high,size_entropy_high_weight).\\npreference_weight(size_entropy_low,size_entropy_low_weight).\\npreference_weight(linear_scale,linear_scale_weight).\\npreference_weight(log_scale,log_scale_weight).\\npreference_weight(ordinal_scale,ordinal_scale_weight).\\npreference_weight(categorical_scale,categorical_scale_weight).\\npreference_weight(c_c_point,c_c_point_weight).\\npreference_weight(c_c_line,c_c_line_weight).\\npreference_weight(c_c_area,c_c_area_weight).\\npreference_weight(c_c_text,c_c_text_weight).\\npreference_weight(c_d_point,c_d_point_weight).\\npreference_weight(c_d_bar,c_d_bar_weight).\\npreference_weight(c_d_line,c_d_line_weight).\\npreference_weight(c_d_area,c_d_area_weight).\\npreference_weight(c_d_text,c_d_text_weight).\\npreference_weight(c_d_tick,c_d_tick_weight).\\npreference_weight(d_d_point,d_d_point_weight).\\npreference_weight(d_d_text,d_d_text_weight).\\npreference_weight(d_d_rect,d_d_rect_weight).\\npreference_weight(linear_x,linear_x_weight).\\npreference_weight(linear_y,linear_y_weight).\\npreference_weight(linear_color,linear_color_weight).\\npreference_weight(linear_size,linear_size_weight).\\npreference_weight(linear_text,linear_text_weight).\\npreference_weight(log_x,log_x_weight).\\npreference_weight(log_y,log_y_weight).\\npreference_weight(log_color,log_color_weight).\\npreference_weight(log_size,log_size_weight).\\npreference_weight(log_text,log_text_weight).\\npreference_weight(ordinal_x,ordinal_x_weight).\\npreference_weight(ordinal_y,ordinal_y_weight).\\npreference_weight(ordinal_color,ordinal_color_weight).\\npreference_weight(ordinal_size,ordinal_size_weight).\\npreference_weight(ordinal_shape,ordinal_shape_weight).\\npreference_weight(ordinal_text,ordinal_text_weight).\\npreference_weight(ordinal_detail,ordinal_detail_weight).\\npreference_weight(categorical_color,categorical_color_weight).\\npreference_weight(aggregate_count,aggregate_count_weight).\\npreference_weight(aggregate_mean,aggregate_mean_weight).\\npreference_weight(aggregate_median,aggregate_median_weight).\\npreference_weight(aggregate_min,aggregate_min_weight).\\npreference_weight(aggregate_max,aggregate_max_weight).\\npreference_weight(aggregate_stdev,aggregate_stdev_weight).\\npreference_weight(aggregate_sum,aggregate_sum_weight).\\npreference_weight(stack_zero,stack_zero_weight).\\npreference_weight(stack_center,stack_center_weight).\\npreference_weight(stack_normalize,stack_normalize_weight).\\npreference_weight(value_point,value_point_weight).\\npreference_weight(value_bar,value_bar_weight).\\npreference_weight(value_line,value_line_weight).\\npreference_weight(value_area,value_area_weight).\\npreference_weight(value_text,value_text_weight).\\npreference_weight(value_tick,value_tick_weight).\\npreference_weight(value_rect,value_rect_weight).\\npreference_weight(summary_point,summary_point_weight).\\npreference_weight(summary_bar,summary_bar_weight).\\npreference_weight(summary_line,summary_line_weight).\\npreference_weight(summary_area,summary_area_weight).\\npreference_weight(summary_text,summary_text_weight).\\npreference_weight(summary_tick,summary_tick_weight).\\npreference_weight(summary_rect,summary_rect_weight).\\npreference_weight(value_continuous_x,value_continuous_x_weight).\\npreference_weight(value_continuous_y,value_continuous_y_weight).\\npreference_weight(value_continuous_color,value_continuous_color_weight).\\npreference_weight(value_continuous_size,value_continuous_size_weight).\\npreference_weight(value_continuous_text,value_continuous_text_weight).\\npreference_weight(value_discrete_x,value_discrete_x_weight).\\npreference_weight(value_discrete_y,value_discrete_y_weight).\\npreference_weight(value_discrete_color,value_discrete_color_weight).\\npreference_weight(value_discrete_size,value_discrete_size_weight).\\npreference_weight(value_discrete_shape,value_discrete_shape_weight).\\npreference_weight(value_discrete_text,value_discrete_text_weight).\\npreference_weight(value_discrete_detail,value_discrete_detail_weight).\\npreference_weight(summary_continuous_x,summary_continuous_x_weight).\\npreference_weight(summary_continuous_y,summary_continuous_y_weight).\\npreference_weight(summary_continuous_color,summary_continuous_color_weight).\\npreference_weight(summary_continuous_size,summary_continuous_size_weight).\\npreference_weight(summary_continuous_text,summary_continuous_text_weight).\\npreference_weight(summary_discrete_x,summary_discrete_x_weight).\\npreference_weight(summary_discrete_y,summary_discrete_y_weight).\\npreference_weight(summary_discrete_color,summary_discrete_color_weight).\\npreference_weight(summary_discrete_size,summary_discrete_size_weight).\\npreference_weight(summary_discrete_shape,summary_discrete_shape_weight).\\npreference_weight(summary_discrete_text,summary_discrete_text_weight).\\npreference_weight(summary_discrete_detail,summary_discrete_detail_weight).\\n',</span> <span class="pre">weights={'aggregate_weight':</span> <span class="pre">1,</span> <span class="pre">'bin_weight':</span> <span class="pre">2,</span> <span class="pre">'bin_high_weight':</span> <span class="pre">10,</span> <span class="pre">'bin_low_weight':</span> <span class="pre">6,</span> <span class="pre">'encoding_weight':</span> <span class="pre">0,</span> <span class="pre">'encoding_field_weight':</span> <span class="pre">6,</span> <span class="pre">'same_field_weight':</span> <span class="pre">8,</span> <span class="pre">'same_field_grt3_weight':</span> <span class="pre">16,</span> <span class="pre">'count_grt1_weight':</span> <span class="pre">50,</span> <span class="pre">'number_categorical_weight':</span> <span class="pre">10,</span> <span class="pre">'bin_low_unique_weight':</span> <span class="pre">5,</span> <span class="pre">'bin_not_linear_weight':</span> <span class="pre">1,</span> <span class="pre">'only_discrete_weight':</span> <span class="pre">30,</span> <span class="pre">'multi_non_pos_weight':</span> <span class="pre">3,</span> <span class="pre">'non_pos_used_before_pos_weight':</span> <span class="pre">10,</span> <span class="pre">'aggregate_group_by_raw_weight':</span> <span class="pre">3,</span> <span class="pre">'aggregate_no_discrete_weight':</span> <span class="pre">2,</span> <span class="pre">'x_y_raw_weight':</span> <span class="pre">1,</span> <span class="pre">'continuous_not_zero_weight':</span> <span class="pre">1,</span> <span class="pre">'size_not_zero_weight':</span> <span class="pre">3,</span> <span class="pre">'continuous_pos_not_zero_weight':</span> <span class="pre">1,</span> <span class="pre">'skew_zero_weight':</span> <span class="pre">5,</span> <span class="pre">'cross_zero_weight':</span> <span class="pre">10,</span> <span class="pre">'only_y_weight':</span> <span class="pre">1,</span> <span class="pre">'binned_orientation_not_x_weight':</span> <span class="pre">1,</span> <span class="pre">'high_cardinality_ordinal_weight':</span> <span class="pre">10,</span> <span class="pre">'high_cardinality_categorical_grt10_weight':</span> <span class="pre">10,</span> <span class="pre">'high_cardinality_shape_weight':</span> <span class="pre">10,</span> <span class="pre">'high_cardinality_size_weight':</span> <span class="pre">1,</span> <span class="pre">'horizontal_scrolling_x_weight':</span> <span class="pre">20,</span> <span class="pre">'horizontal_scrolling_col_weight':</span> <span class="pre">20,</span> <span class="pre">'date_scale_weight':</span> <span class="pre">1,</span> <span class="pre">'number_linear_weight':</span> <span class="pre">2,</span> <span class="pre">'value_agg_weight':</span> <span class="pre">1,</span> <span class="pre">'summary_facet_weight':</span> <span class="pre">0,</span> <span class="pre">'c_d_col_weight':</span> <span class="pre">5,</span> <span class="pre">'date_not_x_weight':</span> <span class="pre">1,</span> <span class="pre">'x_row_weight':</span> <span class="pre">1,</span> <span class="pre">'y_row_weight':</span> <span class="pre">1,</span> <span class="pre">'x_col_weight':</span> <span class="pre">1,</span> <span class="pre">'y_col_weight':</span> <span class="pre">1,</span> <span class="pre">'color_entropy_high_weight':</span> <span class="pre">0,</span> <span class="pre">'color_entropy_low_weight':</span> <span class="pre">0,</span> <span class="pre">'size_entropy_high_weight':</span> <span class="pre">0,</span> <span class="pre">'size_entropy_low_weight':</span> <span class="pre">0,</span> <span class="pre">'linear_scale_weight':</span> <span class="pre">0,</span> <span class="pre">'log_scale_weight':</span> <span class="pre">1,</span> <span class="pre">'ordinal_scale_weight':</span> <span class="pre">2,</span> <span class="pre">'categorical_scale_weight':</span> <span class="pre">3,</span> <span class="pre">'c_c_point_weight':</span> <span class="pre">0,</span> <span class="pre">'c_c_line_weight':</span> <span class="pre">20,</span> <span class="pre">'c_c_area_weight':</span> <span class="pre">20,</span> <span class="pre">'c_c_text_weight':</span> <span class="pre">2,</span> <span class="pre">'c_d_point_weight':</span> <span class="pre">10,</span> <span class="pre">'c_d_bar_weight':</span> <span class="pre">20,</span> <span class="pre">'c_d_line_weight':</span> <span class="pre">20,</span> <span class="pre">'c_d_area_weight':</span> <span class="pre">20,</span> <span class="pre">'c_d_text_weight':</span> <span class="pre">50,</span> <span class="pre">'c_d_tick_weight':</span> <span class="pre">0,</span> <span class="pre">'d_d_point_weight':</span> <span class="pre">0,</span> <span class="pre">'d_d_text_weight':</span> <span class="pre">1,</span> <span class="pre">'d_d_rect_weight':</span> <span class="pre">0,</span> <span class="pre">'linear_x_weight':</span> <span class="pre">0,</span> <span class="pre">'linear_y_weight':</span> <span class="pre">0,</span> <span class="pre">'linear_color_weight':</span> <span class="pre">10,</span> <span class="pre">'linear_size_weight':</span> <span class="pre">1,</span> <span class="pre">'linear_text_weight':</span> <span class="pre">20,</span> <span class="pre">'log_x_weight':</span> <span class="pre">0,</span> <span class="pre">'log_y_weight':</span> <span class="pre">0,</span> <span class="pre">'log_color_weight':</span> <span class="pre">10,</span> <span class="pre">'log_size_weight':</span> <span class="pre">1,</span> <span class="pre">'log_text_weight':</span> <span class="pre">20,</span> <span class="pre">'ordinal_x_weight':</span> <span class="pre">1,</span> <span class="pre">'ordinal_y_weight':</span> <span class="pre">0,</span> <span class="pre">'ordinal_color_weight':</span> <span class="pre">8,</span> <span class="pre">'ordinal_size_weight':</span> <span class="pre">10,</span> <span class="pre">'ordinal_shape_weight':</span> <span class="pre">11,</span> <span class="pre">'ordinal_text_weight':</span> <span class="pre">32,</span> <span class="pre">'ordinal_detail_weight':</span> <span class="pre">20,</span> <span class="pre">'categorical_color_weight':</span> <span class="pre">10,</span> <span class="pre">'aggregate_count_weight':</span> <span class="pre">0,</span> <span class="pre">'aggregate_mean_weight':</span> <span class="pre">1,</span> <span class="pre">'aggregate_median_weight':</span> <span class="pre">3,</span> <span class="pre">'aggregate_min_weight':</span> <span class="pre">4,</span> <span class="pre">'aggregate_max_weight':</span> <span class="pre">4,</span> <span class="pre">'aggregate_stdev_weight':</span> <span class="pre">5,</span> <span class="pre">'aggregate_sum_weight':</span> <span class="pre">2,</span> <span class="pre">'stack_zero_weight':</span> <span class="pre">0,</span> <span class="pre">'stack_center_weight':</span> <span class="pre">1,</span> <span class="pre">'stack_normalize_weight':</span> <span class="pre">1,</span> <span class="pre">'value_point_weight':</span> <span class="pre">0,</span> <span class="pre">'value_bar_weight':</span> <span class="pre">0,</span> <span class="pre">'value_line_weight':</span> <span class="pre">0,</span> <span class="pre">'value_area_weight':</span> <span class="pre">0,</span> <span class="pre">'value_text_weight':</span> <span class="pre">0,</span> <span class="pre">'value_tick_weight':</span> <span class="pre">0,</span> <span class="pre">'value_rect_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_point_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_bar_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_line_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_area_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_text_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_tick_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_rect_weight':</span> <span class="pre">0,</span> <span class="pre">'value_continuous_x_weight':</span> <span class="pre">0,</span> <span class="pre">'value_continuous_y_weight':</span> <span class="pre">0,</span> <span class="pre">'value_continuous_color_weight':</span> <span class="pre">0,</span> <span class="pre">'value_continuous_size_weight':</span> <span class="pre">0,</span> <span class="pre">'value_continuous_text_weight':</span> <span class="pre">0,</span> <span class="pre">'value_discrete_x_weight':</span> <span class="pre">0,</span> <span class="pre">'value_discrete_y_weight':</span> <span class="pre">0,</span> <span class="pre">'value_discrete_color_weight':</span> <span class="pre">0,</span> <span class="pre">'value_discrete_size_weight':</span> <span class="pre">0,</span> <span class="pre">'value_discrete_shape_weight':</span> <span class="pre">0,</span> <span class="pre">'value_discrete_text_weight':</span> <span class="pre">0,</span> <span class="pre">'value_discrete_detail_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_continuous_x_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_continuous_y_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_continuous_color_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_continuous_size_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_continuous_text_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_discrete_x_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_discrete_y_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_discrete_color_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_discrete_size_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_discrete_shape_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_discrete_text_weight':</span> <span class="pre">0,</span> <span class="pre">'summary_discrete_detail_weight':</span> <span class="pre">0})</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#draco.Draco" title="Permalink to this definition">#</a></dt>
<dd><p>A class for holding all the programs used by Draco.</p>
</dd></dl>

</section>
<section id="usage-example">
<h2>Usage Example<a class="headerlink" href="#usage-example" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">draco</span> <span class="kn">import</span> <span class="n">Draco</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">Draco</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">valid_spec</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">attribute(number_rows,root,100).</span>
<span class="s2">entity(field,root,f1).</span>
<span class="s2">attribute((field,name),f1,temperature).</span>
<span class="s2">attribute((field,type),f1,number).</span>

<span class="s2">entity(view,root,v).</span>
<span class="s2">entity(mark,v,m1).</span>
<span class="s2">attribute((mark,type),m1,tick).</span>
<span class="s2">entity(encoding,m1,e1).</span>
<span class="s2">attribute((encoding,channel),e1,x).</span>
<span class="s2">attribute((encoding,field),e1,f1).</span>

<span class="s2">entity(scale,v,sx).</span>
<span class="s2">attribute((scale,channel),sx,x).</span>
<span class="s2">attribute((scale,type),sx,linear).</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span><span class="o">.</span><span class="n">check_spec</span><span class="p">(</span><span class="n">valid_spec</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span><span class="o">.</span><span class="n">get_violations</span><span class="p">(</span><span class="n">valid_spec</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">invalid_spec</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">attribute(number_rows,root,100).</span>
<span class="s2">entity(field,root,f1).</span>
<span class="s2">attribute((field,name),f1,temperature).</span>
<span class="s2">attribute((field,type),f1,number).</span>

<span class="s2">entity(view,root,v).</span>
<span class="s2">entity(mark,v,m1).</span>
<span class="si">% i</span><span class="s2">nvalid mark</span>
<span class="s2">attribute((mark,type),m1,invalid).</span>
<span class="s2">entity(encoding,m1,e1).</span>
<span class="s2">attribute((encoding,channel),e1,x).</span>
<span class="s2">attribute((encoding,field),e1,f1).</span>

<span class="s2">entity(scale,v,sx).</span>
<span class="s2">attribute((scale,channel),sx,x).</span>
<span class="s2">attribute((scale,type),sx,linear).</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span><span class="o">.</span><span class="n">check_spec</span><span class="p">(</span><span class="n">invalid_spec</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span><span class="o">.</span><span class="n">get_violations</span><span class="p">(</span><span class="n">invalid_spec</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;invalid_domain&#39;]
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./api"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="intro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Overview</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="schema.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Read Data and Generate the Schema</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By CMU Data Interaction Group<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>